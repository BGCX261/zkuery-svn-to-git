(function(){zk._p=zkpi('zk.fmt',true);try{(function(){function b(d,c){return d.substring(0,c)}function a(f,c){var d=1,h="";for(var e=c;d&&--e>=0;){var g=f.charAt(e);if(d==1){if(g>="0"&&g<"9"){g=g.$inc(1);d=0}else{if(g=="9"){g="0"}}}h=g+h}if(e>=0){h=f.substring(0,e)+h}return d?"1"+h:h}zk.fmt.Number={format:function(v,z,t){if(z==null){return""}if(!v){return""+z}var O;if(v.indexOf(";")!=-1){v=v.split(";");O=(""+z).charAt(0)=="-";v=v[O?1:0]}var P=this._escapeQuote(v);v=P.fmt;var y=P.pureFmtStr,S=P.purejdot,o=S>=0?y.length-S-1:0,d=(z+"").replace(/[^0123456789.]/g,""),u=d.indexOf("."),l=u>=0?d.length-u-1:0,A=P.shift;if(A>0){if(u>=0){if(l>A){d=d.substring(0,u)+d.substring(u+1,u+1+A)+"."+d.substring(u+1+A);l-=A;u+=A}else{d=d.substring(0,u)+d.substring(u+1);for(var s=A-l;s-->0;){d=d+"0"}u=-1;l=0}}else{for(var s=A;s-->0;){d=d+"0"}}}if(l<=o){if(u==-1){d+="."}for(var s=o-l;s-->0;){d=d+"0"}}else{var F=u+o+1;switch(t){case 0:d=a(d,F);break;case 1:d=b(d,F);break;case 2:d=z<0?b(d,F):a(d,F);break;case 3:d=z>=0?b(d,F):a(d,F);break;case 4:var T=Math.pow(10,l-o)*5,I=d.substring(u+o+1)|0;d=I<T?b(d,F):a(d,F);break;case 5:var T=Math.pow(10,l-o)*5,I=d.substring(u+o+1)|0;d=I<=T?b(d,F):a(d,F);break;case 6:default:var T=Math.pow(10,l-o-1)*5,I=d.substring(u+o+1)|0;if(I==T){var M=d.charAt(o==0?u-1:u+o);d=(M&1)?a(d,F):b(d,F)}else{d=I<T?b(d,F):a(d,F)}}}var k=P.jdot,H="",w="";u=d.indexOf(".");if(u==-1){u=d.length}if(k==-1){k=v.length}if(S==-1){S=y.length}var x=u-S;if(x>0){var E="";for(var s=x;--s>=0;k++){E+="#"}var C=this._extraFmtIndex(v);x+=C;v=v.substring(0,C)+E+v.substring(C,v.length)}for(var s=S-u;--s>=0;u++){d="0"+d}var K=k-v.substring(0,k).lastIndexOf(",");for(var U=1,R=k-1,Q=u-1;R>=0&&Q>=0;){if(U%K==0&&H.charAt(0)!=","){H=zk.GROUPING+H;U++}var f=v.charAt(R);if(f=="#"||f=="0"){var D=d.charAt(Q);H=(D=="0"?f:D)+H;R--;Q--;U++}else{var W=v.charAt(R);if(W!=","){H=W+H;U++}R--}}if(Q>=0){H=d.substr(0,Q+1)+H}var s=(k<0?v.length:k)-(S<0?y.length:S),G=P.prej;if(s>0){var J=v.substring(G,x>0?x:s).replace(new RegExp("[#0.,]","g"),"");if(J){H=J+H}}for(var R=k+1,Q=u+1,B=v.length,q=d.length;R<B;R++){var f=v.charAt(R);if(f=="#"||f=="0"){if(Q<q){w+=d.charAt(Q);Q++}}else{w+=f=="%"?zk.PERCENT:f}}if(Q<d.length){w=d.substr(Q,d.length)}var V=-1;for(var N=w.length,L=v.length;N>0;--N){var D=w.charAt(N-1),f=v.charAt(--L);if(D=="0"&&f=="#"){if(V<0){V=N}}else{if(V>=0){break}}}if(V>=0){w=w.substring(0,N)+w.substring(V)}if(H){H=v.substring(0,G)+this._removePrefixSharps(H)}if(!H&&v.charAt(k+1)=="#"){H="0"}return(z<0&&!O?zk.MINUS:"")+(w?H+(/[\d]/.test(w.charAt(0))?zk.DECIMAL:"")+w:H)},_escapeQuote:function(f){var h,c=-2,e=0,m="",k=-1,o=-1,d="",n=-1,g=f?!new RegExp("('["+zk.PERCENT+"|"+zk.PER_MILL+"]+')","g").test(f):true;for(var i=0,l=f.length;i<l;++i){h=f.charAt(i);if(h=="%"&&g){e+=2}else{if(h==zk.PER_MILL&&g){e+=3}}if(h=="'"){if(c>=0){m+=c==(i-1)?"'":f.substring(c+1,i);c=-2}else{c=i}}else{if(c<0){if(n<0&&(h=="#"||h=="0"||h=="."||h=="-"||h==","||h=="E")){n=m.length}if(h=="#"||h=="0"){d+=h}else{if(h=="."){if(o<0){o=d.length}if(k<0){k=m.length}d+=h}}m+=h}}}return{shift:e,fmt:m,pureFmtStr:d,jdot:k,purejdot:o,prej:n}},_extraFmtIndex:function(e){var f=0;for(var d=e.length;f<d;++f){var g=e.charAt(f);if(g=="#"||g=="0"||g==","){break}}return f},_removePrefixSharps:function(g){var e="",f=true;for(var c=g.length,d=0;d<c;++d){var h=g.charAt(d);if(f){if(h=="#"||h==zk.GROUPING){continue}else{if(/[\d]/.test(h)){f=false}}}e=e+(h=="#"?"0":h)}return e},unformat:function(e,d){if(!d){return{raw:d,divscale:0}}var o=0,i,r,g,q,c=e?zk.MINUS:"-",p=e?zk.DECIMAL:".",f=e?!new RegExp("('["+zk.PERCENT+"|"+zk.PER_MILL+"]+')","g").test(e):true;for(var m=0,n=d.length;m<n;++m){g=d.charAt(m);q=true;if(g==zk.PERCENT&&f){o+=2}else{if(g==zk.PER_MILL&&f){o+=3}else{if(g=="("){i=true}else{if(g!="+"){q=false}}}}if(!q){q=(g<"0"||g>"9")&&g!=p&&g!=c&&g!="+"&&(zUtl.isChar(g,{whitespace:1})||g==zk.GROUPING||g==")"||(e&&e.indexOf(g)>=0))}if(q){if(r==null){r=d.substring(0,m)}}else{var l=g==c?"-":g==p?".":g;if(g!=l&&r==null){r=d.substring(0,m)}if(r!=null){r+=l}}}if(r==null){r=d}if(i){r="-"+r}for(;;){g=r.charAt(0);if(g=="+"){r=r.substring(1)}else{if(g=="-"&&r.charAt(1)=="-"){r=r.substring(2)}else{break}}}for(var m=0,h,n=r.length;m<n;++m){g=r.charAt(m);if(g>"0"&&g<="9"){if(h!==undefined){r=r.substring(0,h)+r.substring(m)}break}else{if(g=="0"){if(h===undefined){h=m}}else{if(h!==undefined){if(g==p&&m>++h){r=r.substring(0,h)+r.substring(m)}break}else{if(g==p){break}}}}}return{raw:r,divscale:o}}}})();
zk.fmt.Text={format:function(e){var d=0,g="";for(var c=0,a=e.length,f,b;c<a;++c){f=e.charAt(c);if(f=="\\"){if(++c>=a){break}g+=e.substring(d,c);f=e.charAt(c);switch(f){case"n":f="\n";break;case"t":f="\t";break;case"r":f="\r";break}g+=f;d=c+1}else{if(f=="{"){b=e.indexOf("}",c+1);if(b<0){break}g+=e.substring(d,c)+arguments[zk.parseInt(e.substring(c+1,b))+1];d=c=b+1}}}if(g){g+=e.substring(d)}return g||e}};

}finally{zk.setLoaded(zk._p.n);}})();