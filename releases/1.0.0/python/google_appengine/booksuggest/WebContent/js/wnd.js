zk.load('zul.wgt',function(){zk._p=zkpi('zul.wnd',true);try{(function(){var e=[],a;function i(p){if(!p._lastSize){return}var m=p.$n(),n=p._mode!="embedded",o=n?jq(m).offsetParent():jq(m).parent(),l=m.style;var j=zk.ie6_&&o[0].clientWidth==0?o[0].offsetWidth-o.zk.borderWidth():o[0].clientWidth,k=zk.ie6_&&o[0].clientHeight==0?o[0].offsetHeight-o.zk.borderHeight():o[0].clientHeight;if(!n){j-=o.zk.paddingWidth();j=o.zk.revisedWidth(j);k-=o.zk.paddingHeight();k=o.zk.revisedHeight(k)}l.width=jq.px0(j);l.height=jq.px0(k)}function f(k){var j=k.node;if(j.style.top&&j.style.top.indexOf("%")>=0){j.style.top=j.offsetTop+"px"}if(j.style.left&&j.style.left.indexOf("%")>=0){j.style.left=j.offsetLeft+"px"}zWatch.fire("onFloatUp",k.control)}function c(q,p,t){var k=q.control,j=q.node;k._hideShadow();var u=jq(j),m=u.find(">div:first"),r=m[0],o=m.nextAll("div:first")[0],l=jq(r).clone()[0],s=jq(o).clone()[0];jq(document.body).prepend('<div id="zk_wndghost" class="'+k.getZclass()+'-move-ghost" style="position:absolute;top:'+p[1]+"px;left:"+p[0]+"px;width:"+u.zk.offsetWidth()+"px;height:"+u.zk.offsetHeight()+"px;z-index:"+j.style.zIndex+'"><dl></dl></div>');q._wndoffs=p;j.style.visibility="hidden";var n=j.offsetHeight-r.offsetHeight-o.offsetHeight;j=jq("#zk_wndghost")[0];j.firstChild.style.height=jq.px0(zk(j.firstChild).revisedHeight(n));j.insertBefore(l,j.firstChild);j.insertBefore(s,j.lastChild);return j}function b(l,j){var k=l.node;j.style.top=jq.px(j.offsetTop+k.offsetTop-l._wndoffs[1]);j.style.left=jq.px(j.offsetLeft+k.offsetLeft-l._wndoffs[0]);document.body.style.cursor=""}function d(l,n,j){var k=l.node,m=l.control;switch(j.domTarget){case m.$n("close"):case m.$n("max"):case m.$n("min"):return true}if(!m.isSizable()||(k.offsetTop+4<n[1]&&k.offsetLeft+4<n[0]&&k.offsetLeft+k.offsetWidth-4>n[0])){return false}return true}function h(k,j){k.node.style.visibility="";var l=k.control;l.zsync();l._fireOnMove(j.data)}var g=zul.wnd.Window=zk.$extends(zul.Widget,{_mode:"embedded",_border:"none",_minheight:100,_minwidth:200,_shadow:true,$init:function(){if(!zk.light){this._fellows={}}this.$supers("$init",arguments);this.listen({onMaximize:this,onClose:this,onMove:this,onSize:this.onSizeEvent,onZIndex:this},-1000);this._skipper=new zul.wnd.Skipper(this)},$define:{mode:_zkf=function(){this._updateDomOuter()},title:_zkf,border:_zkf,closable:_zkf,sizable:function(j){if(this.desktop){if(j){this._makeSizer()}else{if(this._sizer){this._sizer.destroy();this._sizer=null}}}},maximizable:_zkf,minimizable:_zkf,maximized:function(m,v){var y=this.$n();if(y){var C=zk(y),E=this.isRealVisible();if(!E&&m){return}var z,r,q,B,u=y.style,k=this.getZclass();if(m){jq(this.$n("max")).addClass(k+"-maxd");var j=this._mode!="embedded",o=j?jq(y).offsetParent():jq(y).parent();z=u.left;r=u.top;q=u.width;B=u.height;u.top="-10000px";u.left="-10000px";var x=zk.ie6_&&o[0].clientWidth==0?o[0].offsetWidth-o.zk.borderWidth():o[0].clientWidth,D=zk.ie6_&&o[0].clientHeight==0?o[0].offsetHeight-o.zk.borderHeight():o[0].clientHeight;if(!j){x-=o.zk.paddingWidth();x=C.revisedWidth(x);D-=o.zk.paddingHeight();D=C.revisedHeight(D)}u.width=jq.px0(x);u.height=jq.px0(D);this._lastSize={l:z,t:r,w:q,h:B};u.top="0";u.left="0";q=u.width;B=u.height}else{var A=this.$n("max"),n=jq(A);n.removeClass(k+"-maxd").removeClass(k+"-maxd-over");if(this._lastSize){u.left=this._lastSize.l;u.top=this._lastSize.t;u.width=this._lastSize.w;u.height=this._lastSize.h;this._lastSize=null}z=u.left;r=u.top;q=u.width;B=u.height;var p=this.$n("cave");if(p){p.style.width=p.style.height=""}}if(!v||E){this._visible=true;this.fire("onMaximize",{left:z,top:r,width:q,height:B,maximized:m,fromServer:v})}if(E){this.__maximized=true;zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}}},minimized:function(n,m){if(this.isMaximized()){this.setMaximized(false)}var r=this.$n();if(r){var q=r.style,k=q.left,o=q.top,j=q.width,p=q.height;if(n){zWatch.fireDown("onHide",this);jq(r).hide()}else{jq(r).show();zWatch.fireDown("onShow",this)}if(!m){this._visible=false;this.zsync();this.fire("onMinimize",{left:q.left,top:q.top,width:q.width,height:q.height,minimized:n})}}},contentStyle:_zkf,contentSclass:_zkf,position:function(){this._updateDomPos(false,this.isVisible())},minheight:null,minwidth:null,shadow:function(){if(this._shadow){this.zsync()}else{if(this._shadowWgt){this._shadowWgt.destroy();this._shadowWgt=null}}}},repos:function(){this._updateDomPos(false,this.isVisible())},doOverlapped:function(){this.setMode("overlapped")},doPopup:function(){this.setMode("popup")},doHighlighted:function(){this.setMode("highlighted")},doModal:function(){this.setMode("modal")},doEmbedded:function(){this.setMode("embedded")},_doOverlapped:function(){var m=this.getPosition(),l=this.$n(),j=zk(l);if(!m&&(!l.style.top||!l.style.left)){var k=j.revisedOffset();l.style.left=jq.px(k[0]);l.style.top=jq.px(k[1])}else{if(m=="parent"){this._posByParent()}}j.makeVParent();this.zsync();this._updateDomPos();this.setTopmost();this._makeFloat()},_doModal:function(){var q=this.getPosition(),l=this.$n(),p=zk(l);if(q=="parent"){this._posByParent()}p.makeVParent();this.zsync();this._updateDomPos(true);if(!q){var s=zk.parseInt(l.style.top),r=jq.innerY();if(r){var t=s-r;if(t>100){l.style.top=jq.px0(s-(t-100))}}else{if(s>100){l.style.top="100px"}}}var j=this.isRealVisible();this.setTopmost();if(!this._mask){var o=this._shadowWgt?this._shadowWgt.getBottomElement():null;this._mask=new zk.eff.FullMask({id:this.uuid+"-mask",anchor:o?o:this.$n(),zIndex:this._zIndex,visible:j})}if(j){zk.currentModal=this;var m=e[0],k=zk.currentFocus;if(m){m._lastfocus=k}else{a=k}e.unshift(this);m=this;setTimeout(function(){if(!zUtl.isAncestor(m,zk.currentFocus)){m.focus()}},0)}this._makeFloat()},_posByParent:function(){var k=this.$n(),j=zk(zk(k).vparentNode(true)).revisedOffset();this._offset=j;k.style.left=jq.px(j[0]+zk.parseInt(this._left));k.style.top=jq.px(j[1]+zk.parseInt(this._top))},zsync:function(){this.$supers("zsync",arguments);if(this.desktop){if(this._mode=="embedded"){if(this._shadowWgt){this._shadowWgt.destroy();this._shadowWgt=null}}else{if(this._shadow){if(!this._shadowWgt){this._shadowWgt=new zk.eff.Shadow(this.$n(),{left:-4,right:4,top:-2,bottom:3})}if(this.isMaximized()||this.isMinimized()){this._hideShadow()}else{this._shadowWgt.sync()}}}if(this._mask&&this._shadowWgt){var j=this._shadowWgt.getBottomElement()||this.$n();if(j){this._mask.sync(j)}}}},_hideShadow:function(){var j=this._shadowWgt;if(j){j.hide()}},_makeSizer:function(){if(!this._sizer){var j=this.$class;this._sizer=new zk.Draggable(this,null,{stackup:true,draw:j._drawsizing,initSensitivity:0,starteffect:j._startsizing,ghosting:j._ghostsizing,endghosting:j._endghostsizing,ignoredrag:j._ignoresizing,endeffect:j._aftersizing})}},_makeFloat:function(){var k=this.$n("cap");if(k&&!this._drag){k.style.cursor="move";var j=this.$class;this._drag=new zk.Draggable(this,null,{handle:k,stackup:true,fireOnMove:false,starteffect:f,ghosting:c,endghosting:b,ignoredrag:d,endeffect:h,zIndex:99999})}},_updateDomPos:function(m,u){if(!this.desktop||this._mode=="embedded"){return}var o=this.$n(),s=this._position;if(s=="parent"){if(u){this._posByParent()}return}if(!s&&!m){return}var w=o.style;w.position="absolute";var r=w.left,q=w.top;zk(o).center(s);var k=this._shadowWgt;if(s&&k){var j=k.opts,p=o.offsetLeft,v=o.offsetTop;if(s.indexOf("left")>=0&&j.left<0){w.left=jq.px(p-j.left)}else{if(s.indexOf("right")>=0&&j.right>0){w.left=jq.px(p-j.right)}}if(s.indexOf("top")>=0&&j.top<0){w.top=jq.px(v-j.top)}else{if(s.indexOf("bottom")>=0&&j.bottom>0){w.top=jq.px(v-j.bottom)}}}this.zsync();if(r!=w.left||q!=w.top){this._fireOnMove()}},_updateDomOuter:function(){this.rerender(this._skipper)},onClose:function(){if(!this.inServer){this.parent.removeChild(this)}},onMove:function(j){this._left=j.left;this._top=j.top},onMaximize:function(j){var k=j.data;this._top=k.top;this._left=k.left;this._height=k.height;this._width=k.width},onSizeEvent:function(j){var n=j.data,m=this.$n(),l=m.style;this._hideShadow();if(n.width!=l.width){l.width=n.width;this._fixWdh()}if(n.height!=l.height){l.height=n.height;this._fixHgh()}if(n.left!=l.left||n.top!=l.top){l.left=n.left;l.top=n.top;this._fireOnMove(j.keys)}this.zsync();var k=this;setTimeout(function(){zWatch.fireDown("beforeSize",k);zWatch.fireDown("onSize",k)},zk.ie6_?800:0)},onZIndex:_zkf=function(j){this.zsync()},onResponse:_zkf,onShow:function(k){var j=k.origin;if(this!=j&&this._mode!="embedded"&&this.isRealVisible({until:j,dom:true})){zk(this.$n()).cleanVisibility();this.zsync()}this.onSize(j)},onHide:function(k){var j=k.origin;if(this!=j&&this._mode!="embedded"&&this.isRealVisible({until:j,dom:true})){this.$n().style.visibility="hidden";this.zsync()}},beforeSize:function(){if(this.isMaximized()&&!this.__maximized){this.$n().style.width=""}},onSize:function(){this._hideShadow();if(this.isMaximized()){if(!this.__maximized){i(this)}this.__maximized=false}this._fixHgh();this._fixWdh();if(this._mode!="embedded"){this._updateDomPos();this.zsync()}},onFloatUp:function(j){if(!this.isVisible()||this._mode=="embedded"){return}var l=j.origin;if(this._mode=="popup"){for(var k;l;l=l.parent){if(l==this){if(!k){this.setTopmost()}return}k=k||l.isFloating_()}this.setVisible(false);this.fire("onOpen",{open:false})}else{for(;l;l=l.parent){if(l==this){this.setTopmost();return}if(l.isFloating_()){return}}}},_fixWdh:zk.ie7_?function(){if(this._mode!="embedded"&&this._mode!="popup"&&this.isRealVisible()){var l=this.$n(),s=this.$n("cave").parentNode,o=l.style.width,p=jq(l),q=p.find(">div:first"),t=q[0],j=t&&this.$n("cap")?q.nextAll("div:first")[0]:null,m=p.find(">div:last")[0];if(!o||o=="auto"){var k=zk(s.parentNode),r=k.padBorderWidth()+zk(s.parentNode.parentNode).padBorderWidth();if(t){t.firstChild.style.width=jq.px0(s.offsetWidth+r)}if(j){j.firstChild.firstChild.style.width=jq.px(s.offsetWidth-(zk(j).padBorderWidth()+zk(j.firstChild).padBorderWidth()-r))}if(m){m.firstChild.style.width=jq.px0(s.offsetWidth+r)}}else{if(t){t.firstChild.style.width=""}if(j){j.firstChild.style.width=""}if(m){m.firstChild.style.width=""}}}}:zk.$void,_fixHgh:function(){if(this.isRealVisible()){var m=this.$n(),j=m.style.height,l=this.$n("cave"),k=l.style.height;if(zk.ie6_&&j&&j!="auto"&&j!="100%"){l.style.height="0"}if(j&&j!="auto"){zk(l).setOffsetHeight(this._offsetHeight(m))}else{if(k&&k!="auto"){if(zk.ie6_){l.style.height="0"}l.style.height=""}}}},_offsetHeight:function(o){var k=o.offsetHeight-this._titleHeight(o);if(this._mode!="embedded"&&this._mode!="popup"){var m=this.$n("cave"),l=jq(o).find(">div:last")[0],j=this.$n("cap");k-=l.offsetHeight;if(m){k-=zk(m.parentNode).padBorderHeight()}if(j){k-=zk(j.parentNode).padBorderHeight()}}return k-zk(o).padBorderHeight()},_titleHeight:function(m){var l=this.$n("cap"),j=jq(m).find(">div:first"),k=j[0];return l?l.offsetHeight+k.offsetHeight:this._mode!="embedded"&&this._mode!="popup"?k.offsetHeight:0},_fireOnMove:function(m){var p=this._position,l=this.$n(),j=zk.parseInt(l.style.left),o=zk.parseInt(l.style.top);if(p=="parent"){var k=zk(l).vparentNode();if(k){var n=zk(k).revisedOffset();j-=n[0];o-=n[1]}}this.fire("onMove",zk.copy({left:j+"px",top:o+"px"},m),{ignorable:true})},setVisible:function(j){if(this._visible!=j){if(this.isMaximized()){this.setMaximized(false)}else{if(this.isMinimized()){this.setMinimized(false)}}this.$supers("setVisible",arguments);if(j){this._updateDomPos(false,true)}}},setHeight:function(j){this.$supers("setHeight",arguments);if(this.desktop){this._fixHgh();this.zsync();zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}},setWidth:function(j){this.$supers("setWidth",arguments);if(this.desktop){this._fixWdh();this.zsync();zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}},setTop:function(){this._hideShadow();this.$supers("setTop",arguments);this.zsync()},setLeft:function(){this._hideShadow();this.$supers("setLeft",arguments);this.zsync()},setZIndex:_zkf=function(k){var j=this._zIndex;this.$supers("setZIndex",arguments);if(j!=k){this.zsync()}},setZindex:_zkf,focus:function(l){if(this.desktop&&this.isVisible()&&this.canActivate({checkOnly:true})){var k=this.caption;for(var j=this.firstChild;j;j=j.nextSibling){if(j!=k&&j.focus(l)){return true}}return k&&k.focus(l)}return false},getZclass:function(){var j=this._zclass;return j!=null?j:"z-window-"+this._mode},onChildAdded_:function(j){this.$supers("onChildAdded_",arguments);if(j.$instanceof(zul.wgt.Caption)){this.caption=j}},onChildRemoved_:function(j){this.$supers("onChildRemoved_",arguments);if(j==this.caption){this.caption=null}},domStyle_:function(k){var j=this.$supers("domStyle_",arguments);if((!k||!k.visible)&&this.isMinimized()){j="display:none;"+j}if(this._mode!="embedded"){j="position:absolute;"+j}return j},bind_:function(n,m,l){this.$supers(g,"bind_",arguments);var k=this._mode;zWatch.listen({onSize:this,onShow:this});if(zk.ie6_){zWatch.listen({beforeSize:this})}if(k!="embedded"){zWatch.listen({onFloatUp:this,onHide:this});this.setFloating_(true);if(k=="modal"||k=="highlighted"){this._doModal()}else{this._doOverlapped()}}if(this._sizable){this._makeSizer()}this.domListen_(this.$n(),"onMouseOver");if(this.isMaximizable()&&this.isMaximized()){var j=this;l.push(function(){j._maximized=false;j.setMaximized(true,true)})}if(this._mode!="embedded"&&(!zk.css3)){jq.onzsync(this);zWatch.listen({onResponse:this})}},unbind_:function(){var l=this.$n();l.style.visibility="hidden";if(!zk.css3){jq.unzsync(this)}if(this._shadowWgt){this._shadowWgt.destroy();this._shadowWgt=null}if(this._drag){this._drag.destroy();this._drag=null}if(this._sizer){this._sizer.destroy();this._sizer=null}if(this._mask){this._mask.destroy();this._mask=null}zk(l).undoVParent();zWatch.unlisten({onFloatUp:this,onSize:this,onShow:this,onHide:this,onResponse:this});if(zk.ie6_){zWatch.unlisten({beforeSize:this})}this.setFloating_(false);e.$remove(this);if(zk.currentModal==this){var k=zk.currentModal=e[0],j=k?k._lastfocus:a;if(!k){a=null}if(!j||!j.desktop){j=k}if(j){j.focus()}}this._lastfocus=null;this.domUnlisten_(this.$n(),"onMouseOver");this.$supers(g,"unbind_",arguments)},_doMouseOver:function(j){if(this._sizer){var m=this.$n(),l=this.$class._insizer(m,zk(m).revisedOffset(),j.pageX,j.pageY),k=this._mode=="embedded"?false:this.$n("cap");if(!this.isMaximized()&&l){if(this.isMaximized()){return}if(this._backupCursor==undefined){this._backupCursor=m.style.cursor}m.style.cursor=l==1?"n-resize":l==2?"ne-resize":l==3?"e-resize":l==4?"se-resize":l==5?"s-resize":l==6?"sw-resize":l==7?"w-resize":"nw-resize";if(k){k.style.cursor=""}}else{m.style.cursor=this._backupCursor||"";if(k){k.style.cursor="move"}}}},doClick_:function(j){switch(j.domTarget){case this.$n("close"):this.fire("onClose");break;case this.$n("max"):this.setMaximized(!this.isMaximized());break;case this.$n("min"):this.setMinimized(!this.isMinimized());break;default:this.$supers("doClick_",arguments);return}j.stop()},doMouseOver_:function(j){switch(j.domTarget){case this.$n("close"):jq(this.$n("close")).addClass(this.getZclass()+"-close-over");break;case this.$n("max"):var l=this.getZclass(),k=this.isMaximized()?" "+l+"-maxd-over":"";jq(this.$n("max")).addClass(l+"-max-over"+k);break;case this.$n("min"):jq(this.$n("min")).addClass(this.getZclass()+"-min-over");break}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(j){switch(j.domTarget){case this.$n("close"):jq(this.$n("close")).removeClass(this.getZclass()+"-close-over");break;case this.$n("max"):var l=this.getZclass(),k=jq(this.$n("max"));if(this.isMaximized()){k.removeClass(l+"-maxd-over")}k.removeClass(l+"-max-over");break;case this.$n("min"):jq(this.$n("min")).removeClass(this.getZclass()+"-min-over");break}this.$supers("doMouseOut_",arguments)},afterChildrenMinFlex_:function(j){this.$supers("afterChildrenMinFlex_",arguments);if(this._mode=="modal"){this._updateDomPos(true)}},afterChildrenFlex_:function(j){this.$supers("afterChildrenFlex_",arguments);if(this._mode=="modal"){this._updateDomPos(true)}}},{_startsizing:function(j){zWatch.fire("onFloatUp",j.control)},_ghostsizing:function(o,n,j){var m=o.control,l=o.node;m._hideShadow();m.setTopmost();var k=jq(l);jq(document.body).append('<div id="zk_ddghost" class="'+m.getZclass()+'-resize-faker" style="position:absolute;top:'+n[1]+"px;left:"+n[0]+"px;width:"+k.zk.offsetWidth()+"px;height:"+k.zk.offsetHeight()+"px;z-index:"+l.style.zIndex+'"><dl></dl></div>');return jq("#zk_ddghost")[0]},_endghostsizing:function(l,j){var k=l.node;if(j){l.z_szofs={top:k.offsetTop+"px",left:k.offsetLeft+"px",height:jq.px0(zk(k).revisedHeight(k.offsetHeight)),width:jq.px0(zk(k).revisedWidth(k.offsetWidth))}}},_insizer:function(m,n,k,o){var l=n[0]+m.offsetWidth,j=n[1]+m.offsetHeight;if(k-n[0]<=5){if(o-n[1]<=5){return 8}else{if(j-o<=5){return 6}else{return 7}}}else{if(l-k<=5){if(o-n[1]<=5){return 2}else{if(j-o<=5){return 4}else{return 3}}}else{if(o-n[1]<=5){return 1}else{if(j-o<=5){return 5}}}}},_ignoresizing:function(n,p,j){var l=n.node,o=n.control;if(o.isMaximized()){return true}var m=zk(l).revisedOffset(),k=o.$class._insizer(l,m,p[0],p[1]);if(k){o._hideShadow();n.z_dir=k;n.z_box={top:m[1],left:m[0],height:l.offsetHeight,width:l.offsetWidth,minHeight:zk.parseInt(o.getMinheight()),minWidth:zk.parseInt(o.getMinwidth())};n.z_orgzi=l.style.zIndex;return false}return true},_aftersizing:function(l,j){var m=l.control,k=l.z_szofs;m.fire("onSize",zk.copy(k,j.keys),{ignorable:true});l.z_szofs=null},_drawsizing:function(m,n,k){if(m.z_dir==8||m.z_dir<=2){var l=m.z_box.height+m.z_box.top-n[1];if(l<m.z_box.minHeight){n[1]=m.z_box.height+m.z_box.top-m.z_box.minHeight;l=m.z_box.minHeight}m.node.style.height=jq.px0(l);m.node.style.top=jq.px(n[1])}if(m.z_dir>=4&&m.z_dir<=6){var l=m.z_box.height+n[1]-m.z_box.top;if(l<m.z_box.minHeight){l=m.z_box.minHeight}m.node.style.height=jq.px0(l)}if(m.z_dir>=6&&m.z_dir<=8){var j=m.z_box.width+m.z_box.left-n[0];if(j<m.z_box.minWidth){n[0]=m.z_box.width+m.z_box.left-m.z_box.minWidth;j=m.z_box.minWidth}m.node.style.width=jq.px0(j);m.node.style.left=jq.px(n[0])}if(m.z_dir>=2&&m.z_dir<=4){var j=m.z_box.width+n[0]-m.z_box.left;if(j<m.z_box.minWidth){j=m.z_box.minWidth}m.node.style.width=jq.px0(j)}}});zul.wnd.Skipper=zk.$extends(zk.Skipper,{$init:function(j){this._w=j},restore:function(){this.$supers("restore",arguments);var j=this._w;if(j._mode!="embedded"){j._updateDomPos();j.zsync()}}})})();
zkreg('zul.wnd.Window',true);zk._m={};
zk._m['default']=function(c,k){var b=this.getZclass(),a=this.uuid,h=this.getTitle(),j=this.caption,l=this.getContentStyle(),e=this.getContentSclass(),f=this.getMode(),d="embedded"!=f&&"popup"!=f,g="normal"!=this.getBorder()?"-noborder":"";c.push("<div",this.domAttrs_(),">");if(j||h){c.push('<div class="',b,'-tl"><div class="',b,'-tr"></div></div><div class="',b,'-hl"><div class="',b,'-hr"><div class="',b,'-hm"><div id="',a,'-cap" class="',b,'-header">');if(j){j.redraw(c)}else{if(this.isClosable()){c.push('<div id="',a,'-close" class="',b,"-icon ",b,'-close"></div>')}if(this.isMaximizable()){c.push('<div id="',a,'-max" class="',b,"-icon ",b,"-max");if(this.isMaximized()){c.push(" ",b,"-maxd")}c.push('"></div>')}if(this.isMinimizable()){c.push('<div id="'+a,'-min" class="',b,"-icon ",b,'-min"></div>')}c.push(zUtl.encodeXML(h))}c.push("</div></div></div></div>")}else{if(d){c.push('<div class="',b,"-tl",g,'"><div class="',b,"-tr",g,'"></div></div>')}}if(d){c.push('<div class="',b,"-cl",g,'"><div class="',b,"-cr",g,'"><div class="',b,"-cm",g,'">')}c.push('<div id="',a,'-cave" class="');if(e){c.push(e," ")}c.push(b,"-cnt",g,'"');if(l){c.push(' style="',l,'"')}c.push(">");if(!k){for(var i=this.firstChild;i;i=i.nextSibling){if(i!=j){i.redraw(c)}}}c.push("</div>");if(d){c.push('</div></div></div><div class="',b,"-bl",g,'"><div class="',b,"-br",g,'"></div></div>')}c.push("</div>")};
;zkmld(zk._p.p.Window,zk._m);zul.wnd.Panel=zk.$extends(zul.Widget,{_border:"none",_title:"",_open:true,_minheight:100,_minwidth:200,$init:function(){this.$supers("$init",arguments);this.listen({onMaximize:this,onClose:this,onMove:this,onSize:this.onSizeEvent},-1000)},$define:{minheight:null,minwidth:null,sizable:function(a){if(this.desktop){if(a){this._makeSizer()}else{if(this._sizer){this._sizer.destroy();this._sizer=null}}}},framable:_zkf=function(){this.rerender()},movable:_zkf,floatable:_zkf,maximizable:_zkf,minimizable:_zkf,collapsible:_zkf,closable:_zkf,border:_zkf,title:_zkf,open:function(b,a){var c=this.$n();if(c){var e=this.getZclass(),d=jq(this.$n("body"));if(d[0]&&!d.is(":animated")){if(b){jq(c).removeClass(e+"-colpsd");d.zk.slideDown(this)}else{jq(c).addClass(e+"-colpsd");this._hideShadow();if(zk.ie6_&&!c.style.width){c.runtimeStyle.width="100%"}d.zk.slideUp(this)}if(!a){this.fire("onOpen",{open:b})}}}},maximized:function(c,k){var o=this.$n();if(o){var x=zk(o),z=x.isRealVisible();if(!z&&c){return}var q,i,f,u,j=o.style,b=this.getZclass();if(c){jq(this.$n("max")).addClass(b+"-maxd");this._hideShadow();if(this.isCollapsible()&&!this.isOpen()){x.jq.removeClass(b+"-colpsd");var g=this.$n("body");if(g){g.style.display=""}}var a=this.isFloatable(),e=a?jq(o).offsetParent():jq(o).parent();var y=zk.ie6_&&e[0].clientHeight==0?e[0].offsetHeight-e.zk.borderHeight():e[0].clientHeight;if(zk.isLoaded("zkmax.layout")&&this.parent.$instanceof(zkmax.layout.Portalchildren)){var v=this.parent.parent;if(v.getMaximizedMode()=="whole"){this._inWholeMode=true;var n=v.$n();y=zk.ie6_&&n.clientHeight==0?n.offsetHeight-jq(n).zk.borderHeight():n.clientHeight;o._scrollTop=n.parentNode.scrollTop;n.parentNode.scrollTop=0;x.makeVParent();o._pos=o.style.position;o._ppos=n.style.position;o._zindex=o.style.zIndex;o.style.position="absolute";this.setFloating_(true);this.setTopmost();n.appendChild(o);n.style.position="relative";if(!n.style.height){n.style.height=jq.px0(y);o._pheight=true}}}var a=this.isFloatable(),e=a?jq(o).offsetParent():jq(o).parent();q=j.left;i=j.top;f=j.width;u=j.height;j.top="-10000px";j.left="-10000px";var m=zk.ie6_&&e[0].clientWidth==0?e[0].offsetWidth-e.zk.borderWidth():e[0].clientWidth;if(!a){m-=e.zk.paddingWidth();m=x.revisedWidth(m);y-=e.zk.paddingHeight();y=x.revisedHeight(y)}j.width=jq.px0(m);j.height=jq.px0(y);this._lastSize={l:q,t:i,w:f,h:u};j.top="0";j.left="0";f=j.width;u=j.height}else{var r=this.$n("max"),d=jq(r);d.removeClass(b+"-maxd").removeClass(b+"-maxd-over");if(this._lastSize){j.left=this._lastSize.l;j.top=this._lastSize.t;j.width=this._lastSize.w;j.height=this._lastSize.h;this._lastSize=null}q=j.left;i=j.top;f=j.width;u=j.height;if(this.isCollapsible()&&!this.isOpen()){jq(o).addClass(b+"-colpsd");var g=this.$n("body");if(g){g.style.display="none"}}var g=this.panelchildren?this.panelchildren.$n():null;if(g){g.style.width=g.style.height=""}if(this._inWholeMode){x.undoVParent();o.style.position=o._pos;o.style.zIndex=o._zindex;this.setFloating_(false);var n=this.parent.parent.$n();n.style.position=o._ppos;n.parentNode.scrollTop=o._scrollTop;if(o._pheight){n.style.height=""}o._scrollTop=o._ppos=o._zindex=o._pos=o._pheight=null;this._inWholeMode=false}}if(!k&&z){this._visible=true;this.fire("onMaximize",{left:q,top:i,width:f,height:u,maximized:c,fromServer:k})}if(z){this.__maximized=true;zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}}},minimized:function(d,c){if(this.isMaximized()){this.setMaximized(false)}var i=this.$n();if(i){var g=i.style,b=g.left,e=g.top,a=g.width,f=g.height;if(d){zWatch.fireDown("onHide",this);jq(i).hide()}else{jq(i).show();zWatch.fireDown("onShow",this)}if(!c){this._visible=false;this.fire("onMinimize",{left:g.left,top:g.top,width:g.width,height:g.height,minimized:d})}}}},setVisible:function(a){if(this._visible!=a){if(this.isMaximized()){this.setMaximized(false)}else{if(this.isMinimized()){this.setMinimized(false)}}this.$supers("setVisible",arguments)}},setHeight:function(){this.$supers("setHeight",arguments);if(this.desktop){zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}},setWidth:function(){this.$supers("setWidth",arguments);if(this.desktop){zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}},setTop:function(){this._hideShadow();this.$supers("setTop",arguments);this.zsync()},setLeft:function(){this._hideShadow();this.$supers("setLeft",arguments);this.zsync()},updateDomStyle_:function(){this.$supers("updateDomStyle_",arguments);if(this.desktop){zWatch.fireDown("beforeSize",this);zWatch.fireDown("onSize",this)}},addToolbar:function(a,b){switch(a){case"tbar":this.tbar=b;break;case"bbar":this.bbar=b;break;case"fbar":this.fbar=b;break;default:return false}return this.appendChild(b)},onClose:function(){if(!this.inServer||!this.isListen("onClose",{asapOnly:1})){this.parent.removeChild(this)}},onMove:function(a){this._left=a.left;this._top=a.top},onMaximize:function(a){var b=a.data;this._top=b.top;this._left=b.left;this._height=b.height;this._width=b.width},onSizeEvent:function(a){var e=a.data,d=this.$n(),c=d.style;this._hideShadow();if(e.width!=c.width){c.width=e.width}if(e.height!=c.height){c.height=e.height;this._fixHgh()}if(e.left!=c.left||e.top!=c.top){c.left=e.left;c.top=e.top;this.fire("onMove",zk.copy({left:d.style.left,top:d.style.top},a.data),{ignorable:true})}this.zsync();var b=this;setTimeout(function(){zWatch.fireDown("beforeSize",b);zWatch.fireDown("onSize",b)},zk.ie6_?800:0)},beforeSize:function(){if(this.isMaximized()&&!this.__maximized){this.$n().style.width=""}},onSize:_zkf=(function(){function a(i){if(!i._lastSize){return}var f=i.$n(),e=zk(f),g=i.isFloatable(),h=g?jq(f).offsetParent():jq(f).parent(),d=f.style;var b=zk.ie6_&&h[0].clientWidth==0?h[0].offsetWidth-h.zk.borderWidth():h[0].clientWidth;if(!g){b-=h.zk.paddingWidth();b=e.revisedWidth(b)}d.width=jq.px0(b);if(i.isOpen()){var c=zk.ie6_&&h[0].clientHeight==0?h[0].offsetHeight-h.zk.borderHeight():h[0].clientHeight;if(!g){c-=h.zk.paddingHeight();c=e.revisedHeight(c)}d.height=jq.px0(c)}}return function(b){this._hideShadow();if(this.isMaximized()){if(!this.__maximized){a(this)}this.__maximized=false}if(this.tbar){b.fireDown(this.tbar)}if(this.bbar){b.fireDown(this.bbar)}if(this.fbar){b.fireDown(this.fbar)}this._fixHgh();this.zsync()}})(),onShow:_zkf,onHide:function(){this._hideShadow()},_fixHgh:function(){var b;if(!(b=this.panelchildren)||b.z_rod||!this.isRealVisible()){return}var d=this.$n(),a=b.$n(),c=d.style.height;if(zk.ie6_&&((c&&c!="auto")||a.style.height)){a.style.height="0"}if(c&&c!="auto"){zk(a).setOffsetHeight(this._offsetHeight(d))}if(zk.ie6_){zk(a).redoCSS()}},_offsetHeight:function(i){var c=i.offsetHeight-this._titleHeight(i);if(this.isFramable()){var a=this.panelchildren.$n(),g=jq(this.$n("body")).find(":last")[0],f=this.$n("cap");c-=g.offsetHeight;if(a){c-=zk(a.parentNode).padBorderHeight()}if(f){c-=zk(f.parentNode).padBorderHeight()}}c-=zk(i).padBorderHeight();var b=this.$n("tb"),e=this.$n("bb"),d=this.$n("fb");if(b){c-=b.offsetHeight}if(e){c-=e.offsetHeight}if(d){c-=d.offsetHeight}return c},_titleHeight:function(d){var b=this.isFramable(),a=this.$n("cap"),c=b?jq(d).find("> div:first-child")[0].offsetHeight:0;return a?(b?jq(d).find("> div:first-child").next()[0]:a).offsetHeight+c:c},onFloatUp:function(a){if(!this.isVisible()||!this.isFloatable()){return}for(var b=a.origin;b;b=b.parent){if(b==this){this.setTopmost();return}if(b.isFloating_()){return}}},getZclass:function(){return this._zclass==null?"z-panel":this._zclass},_makeSizer:function(){if(!this._sizer){var a=this.$class;this._sizer=new zk.Draggable(this,null,{stackup:true,draw:a._drawsizing,starteffect:a._startsizing,ghosting:a._ghostsizing,endghosting:a._endghostsizing,ignoredrag:a._ignoresizing,endeffect:a._aftersizing})}},_initFloat:function(){var b=this.$n();if(!b.style.top||!b.style.left){var a=zk(b).revisedOffset();b.style.left=jq.px(a[0]);b.style.top=jq.px(a[1])}b.style.position="absolute";if(this.isMovable()){this._initMove()}this.zsync();if(this.isRealVisible()){this.setTopmost()}},_initMove:function(b){var c=this.$n("cap");if(c&&!this._drag){c.style.cursor="move";var a=this.$class;this._drag=new zk.Draggable(this,null,{handle:c,stackup:true,starteffect:a._startmove,ignoredrag:a._ignoremove,endeffect:a._aftermove})}},zsync:function(){this.$supers("zsync",arguments);if(!this.isFloatable()){if(this._shadow){this._shadow.destroy();this._shadow=null}}else{var a=this.$n("body");if(a&&zk(a).isRealVisible()){if(!this._shadow){this._shadow=new zk.eff.Shadow(this.$n(),{left:-4,right:4,top:-2,bottom:3})}if(this.isMaximized()||this.isMinimized()){this._hideShadow()}else{this._shadow.sync()}}}},_hideShadow:function(){var a=this._shadow;if(a){a.hide()}},bind_:function(f,e,d){this.$supers(zul.wnd.Panel,"bind_",arguments);zWatch.listen({onSize:this,onShow:this,onHide:this});if(zk.ie6_){zWatch.listen({beforeSize:this})}var c=this.uuid,b=this.$class;if(this._sizable){this._makeSizer()}this.domListen_(this.$n(),"onMouseOver");if(this.isFloatable()){zWatch.listen({onFloatUp:this});this.setFloating_(true);this._initFloat();if(!zk.css3){jq.onzsync(this)}}if(this.isMaximizable()&&this.isMaximized()){var a=this;d.push(function(){a._maximized=false;a.setMaximized(true,true)})}},unbind_:function(){if(this._inWholeMode){var a=this.$n();zk(a).undoVParent();var b=this.parent;if(b&&(b=b.parent)&&(b=b.$n())){b.style.position=a._ppos;b.parentNode.scrollTop=a._scrollTop}a._scrollTop=a._ppos=a._zindex=a._pos=null;this._inWholeMode=false}zWatch.unlisten({onSize:this,onShow:this,onHide:this,onFloatUp:this});if(zk.ie6_){zWatch.unlisten({beforeSize:this})}this.setFloating_(false);if(!zk.css3){jq.unzsync(this)}if(this._shadow){this._shadow.destroy();this._shadow=null}if(this._drag){this._drag.destroy();this._drag=null}this.domUnlisten_(this.$n(),"onMouseOver");this.$supers(zul.wnd.Panel,"unbind_",arguments)},_doMouseOver:function(a){if(this._sizer){var e=this.$n(),d=this.$class._insizer(e,zk(e).revisedOffset(),a.pageX,a.pageY),b=this.isMovable()?this.$n("cap"):false;if(!this.isMaximized()&&this.isOpen()&&d){if(this._backupCursor==undefined){this._backupCursor=e.style.cursor}e.style.cursor=d==1?"n-resize":d==2?"ne-resize":d==3?"e-resize":d==4?"se-resize":d==5?"s-resize":d==6?"sw-resize":d==7?"w-resize":"nw-resize";if(b){b.style.cursor=""}}else{e.style.cursor=this._backupCursor;if(b){b.style.cursor="move"}}}},doClick_:function(b){switch(b.domTarget){case this.$n("close"):this.fire("onClose");break;case this.$n("max"):this.setMaximized(!this.isMaximized());break;case this.$n("min"):this.setMinimized(!this.isMinimized());break;case this.$n("exp"):var a=this.$n("body"),c=a?zk(a).isVisible():this.isOpen();if(!c==this.isOpen()){this._open=c}this.setOpen(!c);break;default:this.$supers("doClick_",arguments);return}b.stop()},doMouseOver_:function(a){switch(a.domTarget){case this.$n("close"):jq(this.$n("close")).addClass(this.getZclass()+"-close-over");break;case this.$n("max"):var c=this.getZclass(),b=this.isMaximized()?" "+c+"-maxd-over":"";jq(this.$n("max")).addClass(c+"-max-over"+b);break;case this.$n("min"):jq(this.$n("min")).addClass(this.getZclass()+"-min-over");break;case this.$n("exp"):jq(this.$n("exp")).addClass(this.getZclass()+"-exp-over");break}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(a){switch(a.domTarget){case this.$n("close"):jq(this.$n("close")).removeClass(this.getZclass()+"-close-over");break;case this.$n("max"):var c=this.getZclass(),b=jq(this.$n("max"));if(this.isMaximized()){b.removeClass(c+"-maxd-over")}b.removeClass(c+"-max-over");break;case this.$n("min"):jq(this.$n("min")).removeClass(this.getZclass()+"-min-over");break;case this.$n("exp"):jq(this.$n("exp")).removeClass(this.getZclass()+"-exp-over");break}this.$supers("doMouseOut_",arguments)},domClass_:function(d){var b=this.$supers("domClass_",arguments);if(!d||!d.zclass){var c=this.getZclass();var a="normal"==this.getBorder()?"":c+"-noborder";if(a){b+=(b?" ":"")+a}a=this.isOpen()?"":c+"-colpsd";if(a){b+=(b?" ":"")+a}}return b},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(a.$instanceof(zul.wgt.Caption)){this.caption=a}else{if(a.$instanceof(zul.wnd.Panelchildren)){this.panelchildren=a}else{if(a.$instanceof(zul.wgt.Toolbar)){if(this.firstChild==a||(this.nChildren==(this.caption?2:1))){this.tbar=a}else{if(this.lastChild==a&&a.previousSibling.$instanceof(zul.wgt.Toolbar)){this.fbar=a}else{if(a.previousSibling.$instanceof(zul.wnd.Panelchildren)){this.bbar=a}}}}}}this.rerender()},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);if(a==this.caption){this.caption=null}else{if(a==this.panelchildren){this.panelchildren=null}else{if(a==this.tbar){this.tbar=null}else{if(a==this.bbar){this.bbar=null}else{if(a==this.fbar){this.fbar=null}}}}}if(!this.childReplacing_){this.rerender()}}},{_startmove:function(b){b.control._hideShadow();var a=b.node;if(a.style.top&&a.style.top.indexOf("%")>=0){a.style.top=a.offsetTop+"px"}if(a.style.left&&a.style.left.indexOf("%")>=0){a.style.left=a.offsetLeft+"px"}},_ignoremove:function(b,d,a){var c=b.control;switch(a.domTarget){case c.$n("close"):case c.$n("max"):case c.$n("min"):case c.$n("exp"):return true}return false},_aftermove:function(b,a){b.control.zsync()},_startsizing:zul.wnd.Window._startsizing,_ghostsizing:zul.wnd.Window._ghostsizing,_endghostsizing:zul.wnd.Window._endghostsizing,_insizer:zul.wnd.Window._insizer,_ignoresizing:function(e,g,a){var c=e.node,f=e.control;if(f.isMaximized()||!f.isOpen()){return true}var d=zk(c).revisedOffset(),b=f.$class._insizer(c,d,g[0],g[1]);if(b){f._hideShadow();e.z_dir=b;e.z_box={top:d[1],left:d[0],height:c.offsetHeight,width:c.offsetWidth,minHeight:zk.parseInt(f.getMinheight()),minWidth:zk.parseInt(f.getMinwidth())};e.z_orgzi=c.style.zIndex;return false}return true},_aftersizing:zul.wnd.Window._aftersizing,_drawsizing:zul.wnd.Window._drawsizing});
zkreg('zul.wnd.Panel');zk._m={};
zk._m['default']=function(c,i){var b=this.getZclass(),a=this.uuid,d=this.getTitle(),h=this.caption,g=this.isFramable(),e=this.getBorder()!="normal",f=!h&&!d;c.push("<div",this.domAttrs_(),">");if(h||d){if(g){c.push('<div class="',b,'-tl"><div class="',b,'-tr"></div></div>');c.push('<div class="',b,'-hl"><div class="',b,'-hr"><div class="',b,'-hm">')}c.push('<div id="',a,'-cap" class="',b,"-header ");if(!g&&e){c.push(b,"-header-noborder")}c.push('">');if(!h){if(this.isClosable()){c.push('<div id="',a,'-close" class="',b,"-icon ",b,'-close"></div>')}if(this.isMaximizable()){c.push('<div id="',a,'-max" class="',b,"-icon ",b,"-max");if(this.isMaximized()){c.push(" ",b,"-maxd")}c.push('"></div>')}if(this.isMinimizable()){c.push('<div id="',a,'-min" class="',b,"-icon ",b,'-min"></div>')}if(this.isCollapsible()){c.push('<div id="',a,'-exp" class="',b,"-icon ",b,'-exp"></div>')}c.push(zUtl.encodeXML(d))}else{h.redraw(c)}c.push("</div>");if(g){c.push("</div></div></div>")}}else{if(g){c.push('<div class="',b,'-tl"><div class="',b,'-tr"></div></div>')}}c.push('<div id="',a,'-body" class="',b,'-body"');if(!this.isOpen()){c.push(' style="display:none;"')}c.push(">");if(g){c.push('<div class="',b,'-cl"><div class="',b,'-cr"><div class="',b,"-cm");if(f){c.push(" ",b,"-noheader")}c.push('">')}if(this.tbar){c.push('<div id="',a,'-tb" class="',b,"-top");if(e){c.push(" ",b,"-top-noborder")}if(f){c.push(" ",b,"-noheader")}c.push('">');this.tbar.redraw(c);c.push("</div>")}if(this.panelchildren){this.panelchildren.redraw(c)}if(this.bbar){c.push('<div id="',a,'-bb" class="',b,"-btm");if(e){c.push(" ",b,"-btm-noborder")}if(f){c.push(" ",b,"-noheader")}c.push('">');this.bbar.redraw(c);c.push("</div>")}if(g){c.push('</div></div></div><div class="',b,"-fl");if(!this.fbar){c.push(" ",b,"-nobtm2")}c.push('"><div class="',b,'-fr"><div class="',b,'-fm">')}if(this.fbar){c.push('<div id="',a,'-fb" class="',b,'-btm2">');this.fbar.redraw(c);c.push("</div>")}if(g){c.push('</div></div></div><div class="',b,'-bl"><div class="',b,'-br"></div></div>')}c.push("</div></div>")};
;zkmld(zk._p.p.Panel,zk._m);zul.wnd.Panelchildren=zk.$extends(zul.Widget,{setHeight:zk.$void,setWidth:zk.$void,getZclass:function(){return this._zclass==null?"z-panel-children":this._zclass},domClass_:function(d){var b=this.$supers("domClass_",arguments);if(!d||!d.zclass){var c=this.getZclass();var a=!this.parent.getTitle()&&!this.parent.caption?c+"-noheader":"";if(a){b+=(b?" ":"")+a}a=this.parent.getBorder()=="normal"?"":c+"-noborder";if(a){b+=(b?" ":"")+a}}return b},updateDomStyle_:function(){this.$supers("updateDomStyle_",arguments);if(this.desktop){zWatch.fireDown("beforeSize",this.parent);zWatch.fireDown("onSize",this.parent)}}});
zkreg('zul.wnd.Panelchildren',true);zk._m={};
zk._m['default']=function(b){b.push("<div",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div>")};
;zkmld(zk._p.p.Panelchildren,zk._m);
}finally{zk.setLoaded(zk._p.n);}});zk.setLoaded('zul.wnd',1);