zk.load('zul.wgt,zk.fmt',function(){zk._p=zkpi('zul.inp',true);try{(function(){function e(i,h,j){var g={value:h,start:zk(i.getInputNode()).getSelectionRange()[0]};if(j){g.bySelectBack=true}return g}function f(g){b(g);g._tidChg=setTimeout(g.proxy(a),zul.inp.InputWidget.onChangingDelay)}function b(h,g){if(h._tidChg){clearTimeout(h._tidChg);h._tidChg=null}if(g){if(zul.inp.InputWidget.onChangingForced&&h.isListen("onChanging")){a.call(h,-1)}h._lastChg=h.valueEnter_=h.valueSel_=null}}function a(i){var h=this.getInputNode(),j=this.valueEnter_||h.value;if(this._lastChg!=j){this._lastChg=j;var g=this.valueSel_;this.valueSel_=null;this.fire("onChanging",e(this,j,g==j),{ignorable:1},i||5)}}var d=zk.ie?function(){return true}:zk.opera?function(g){return g==32||g>46}:function(g){return g>=32};var c=zul.inp.InputWidget=zk.$extends(zul.Widget,{_maxlength:0,_cols:0,_tabindex:-1,_type:"text",$define:{name:function(g){var h=this.getInputNode();if(h){h.name=g}},disabled:function(g){var h=this.getInputNode();if(h){h.disabled=g;var i=this.getZclass(),j=g?"addClass":"removeClass";jq(this.$n())[j](i+"-disd");jq(h)[j](i+"-text-disd")}},readonly:function(g){var i=this.getInputNode();if(i){var j=this.getZclass(),k=g?"addClass":"removeClass";i.readOnly=g;jq(i)[k](j+"-readonly");if(!this.inRoundedMold()){return}var h=this.$n("btn");jq(h)[k](j+"-btn-readonly");if(zk.ie6_){jq(h)[k](j+(this._buttonVisible?"-btn-readonly":"-btn-right-edge-readonly"))}}},cols:function(h){var g=this.getInputNode();if(g){if(this.isMultiline()){g.cols=h}else{g.size=h}}},maxlength:function(g){var h=this.getInputNode();if(h&&!this.isMultiline()){h.maxLength=g}},tabindex:function(g){var h=this.getInputNode();if(h){h.tabIndex=g}},inplace:function(g){this.rerender()}},getInplaceCSS:function(){return this._inplace?this.getZclass()+"-inplace":""},select:function(h,g){zk(this.getInputNode()).setSelectionRange(h,g)},getType:function(){return this._type},isMultiline:function(){return false},inRoundedMold:function(){return this._mold=="rounded"},getValue:function(){return this._value},setValue:function(i,g){var j;if(g){this.clearErrorMessage(true)}else{if(i==this._lastRawValVld){return}else{j=this._validate(i);i=j.value}}if((!j||!j.error)&&(g||this._value!=i)){this._value=i;var h=this.getInputNode();if(h){h.value=i=this.coerceToString_(i);if(g){this._defValue=i}}}},getInputNode:_zkf=function(){return this.$n("real")||this.$n()},getTextNode:_zkf,domAttrs_:function(h){var g=this.$supers("domAttrs_",arguments);if(!h||!h.text){g+=this.textAttrs_()}return g},textAttrs_:function(){var h="",g;if(this.isMultiline()){g=this._cols;if(g>0){h+=' cols="'+g+'"'}}else{h+=' value="'+this._areaText()+'"';h+=' type="'+this._type+'"';g=this._cols;if(g>0){h+=' size="'+g+'"'}g=this._maxlength;if(g>0){h+=' maxlength="'+g+'"'}}g=this._tabindex;if(g>=0){h+=' tabindex="'+g+'"'}g=this._name;if(g){h+=' name="'+g+'"'}if(this._disabled){h+=' disabled="disabled"'}if(this._readonly){h+=' readonly="readonly"'}var i=jq.filterTextStyle(this.domStyle_({width:true,height:true,top:true,left:true}));if(i){h+=' style="'+i+'"'}return h},_onChanging:a,_areaText:function(){return zUtl.encodeXML(this.coerceToString_(this._value))},setConstraint:function(g){if(typeof g=="string"&&g.charAt(0)!="["){this._cst=new zul.inp.SimpleConstraint(g)}else{this._cst=g}if(this._cst){delete this._lastRawValVld}},getConstraint:function(){return this._cst},doMouseOut_:function(){this._inplaceout=true;this.$supers("doMouseOut_",arguments)},doMouseOver_:function(){this._inplaceout=false;this.$supers("doMouseOver_",arguments)},doFocus_:function(g){this.$supers("doFocus_",arguments);if(g.domTarget.tagName){var i=this.getInputNode();this._lastChg=i.value;jq(this.$n()).addClass(this.getZclass()+"-focus");if(this._inplace){jq(this.getInputNode()).removeClass(this.getInplaceCSS());if(this._inplaceout===undefined){this._inplaceout=true}}if(this._errbox){var h=this;setTimeout(function(){if(h._errbox){h._errbox.open(h,null,"end_before",{overflow:true})}})}}},doBlur_:function(g){b(this,true);jq(this.$n()).removeClass(this.getZclass()+"-focus");if(!zk.alerting&&this.shallUpdate_(zk.currentFocus)){this.updateChange_();this.$supers("doBlur_",arguments)}if(this._inplace&&this._inplaceout){jq(this.getInputNode()).addClass(this.getInplaceCSS())}},_doSelect:function(h){if(this.isListen("onSelection")){var j=this.getInputNode(),i=zk(j).getSelectionRange(),g=i[0],k=i[1];this.fire("onSelection",{start:g,end:k,selected:j.value.substring(g,k)})}},shallUpdate_:function(g){return !g||!zUtl.isAncestor(this,g)},getErrorMesssage:function(){return this._errmsg},setErrorMessage:function(g){this.clearErrorMessage(true,true);this._markError(g,null,true)},clearErrorMessage:function(j,i){var g=this._errbox;if(g){this._errbox=null;g.destroy()}if(!i){var h=this.getZclass();this._errmsg=null;jq(this.getInputNode()).removeClass(h+"-text-invalid");if(zk.ie6_&&this.inRoundedMold()){jq(this.$n("btn")).removeClass(h+"-btn-right-edge-invalid")}}if(j){delete this._lastRawValVld}},coerceFromString_:function(g){return g},coerceToString_:function(g){return g||""},_markError:function(l,k,i){this._errmsg=l;var j=this.getZclass();if(this.desktop){jq(this.getInputNode()).addClass(j+"-text-invalid");if(zk.ie6_&&this.inRoundedMold()&&!this._buttonVisible){jq(this.$n("btn")).addClass(j+"-btn-right-edge-invalid")}var g=this._cst,h;if(g!="[c"){if(g&&(h=g.showCustomError)){h=h.call(g,this,l)}if(!h){this._errbox=this.showError_(l)}}if(!i){this.fire("onError",{value:k,message:l})}}},validate_:function(i){var g;if(g=this._cst){if(typeof g=="string"){return false}var h=g.validate(this,i);if(!h&&g.serverValidate){return false}return h}},_validate:function(g){zul.inp.validating=true;try{var i=g,h;if(typeof i=="string"||i==null){i=this.coerceFromString_(i);if(i&&(h=i.error)){this.clearErrorMessage(true);if(this._cst=="[c"){return{error:h,server:true}}this._markError(h,i);return i}}if(!this.desktop){this._errmsg=null}else{this.clearErrorMessage(true);h=this.validate_(i);if(h===false){this._lastRawValVld=g;return{value:i,server:true}}if(h){this._markError(h,i);return{error:h}}else{this._lastRawValVld=g}}return{value:i}}finally{zul.inp.validating=false}},_shallIgnore:function(g,i){var h=(zk.ie||zk.opera)?g.keyCode:g.charCode;if(!g.altKey&&!g.ctrlKey&&d(h)&&i.indexOf(String.fromCharCode(h))<0){g.stop();return true}},showError_:function(h){var g=new zul.inp.Errorbox();g.show(this,h);return g},updateChange_:function(){if(zul.inp.validating){return false}var h=this.getInputNode(),j=h.value;if(j==this._lastRawValVld){return false}var g=this._errmsg,k=this._validate(j);if(!k.error||k.server){var i;if(!k.error){h.value=j=this.coerceToString_(k.value);i=g||j!=this._defValue;if(i){this._value=k.value;this._defValue=j}}if(i||k.server){this.fire("onChange",e(this,j),k.server?{toServer:true}:null,150)}}return true},_resetForm:function(){var g=this.getInputNode();if(g.value!=g.defaultValue){var h=this;setTimeout(function(){h.updateChange_()},0)}},focus:function(g){if(this.isVisible()&&this.canActivate({checkOnly:true})){zk(this.getInputNode()).focus(g);return true}return false},domClass_:function(i){var h=this.$supers("domClass_",arguments),g=this.getZclass();if((!i||!i.zclass)&&this._disabled){h+=" "+g+"-disd"}if((!i||!i.input)&&this._inplace){h+=" "+this.getInplaceCSS()}return h},bind_:function(){this.$supers(c,"bind_",arguments);var h=this.getInputNode(),g=this.getZclass();if(this._readonly){jq(h).addClass(g+"-readonly")}if(this._disabled){jq(h).addClass(g+"-text-disd")}this.domListen_(h,"onFocus","doFocus_").domListen_(h,"onBlur","doBlur_").domListen_(h,"onSelect");if(h=h.form){jq(h).bind("reset",this.proxy(this._resetForm))}},unbind_:function(){this.clearErrorMessage(true);var g=this.getInputNode();this.domUnlisten_(g,"onFocus","doFocus_").domUnlisten_(g,"onBlur","doBlur_").domUnlisten_(g,"onSelect");if(g=g.form){jq(g).unbind("reset",this.proxy(this._resetForm))}this.$supers(c,"unbind_",arguments)},doKeyDown_:function(g){var k=g.keyCode;if(this._readonly&&k==8&&g.target==this){g.stop();return}if(!this._inplaceout){this._inplaceout=k==9}if(k==9&&!g.altKey&&!g.ctrlKey&&!g.shiftKey&&this._tabbable){var i=this.getInputNode(),j=zk(i),h=j.getSelectionRange(),l=i.value;l=l.substring(0,h[0])+"\t"+l.substring(h[1]);i.value=l;l=h[0]+1;j.setSelectionRange(l,l);g.stop();return}b(this);this.$supers("doKeyDown_",arguments)},doKeyUp_:function(){if(this.isMultiline()){var g=this._maxlength;if(g>0){var h=this.getInputNode(),i=h.value;if(i!=this._defValue&&i.length>g){h.value=i.substring(0,g)}}}if(this.isListen("onChanging")){f(this)}this.$supers("doKeyUp_",arguments)},afterKeyDown_:function(g){if(this._inplace){if(!this._multiline&&g.keyCode==13){var i=jq(this.getInputNode()),h=this.getInplaceCSS();if(i.toggleClass(h).hasClass(h)){i.zk.setSelectionRange(0,i[0].value.length)}}else{jq(this.getInputNode()).removeClass(this.getInplaceCSS())}}if(g.keyCode!=13||!this.isMultiline()){this.$supers("afterKeyDown_",arguments)}},beforeCtrlKeys_:function(g){this.updateChange_()}},{onChangingDelay:350,onChangingForced:true,_allowKeys:"0123456789"+zk.MINUS})})();
zul.inp.Errorbox=zk.$extends(zul.wgt.Popup,{$init:function(){this.$supers("$init",arguments);this.setWidth("260px");this.setSclass("z-errbox")},show:function(a,b){this.parent=a;this.parent.__ebox=this;this.msg=b;jq(document.body).append(this);this.open(a,null,"end_before",{overflow:true});zWatch.listen({onHide:[this.parent,this.onParentHide]})},destroy:function(){if(this.parent){zWatch.unlisten({onHide:[this.parent,this.onParentHide]});delete this.parent.__ebox}this.close();this.unbind();jq(this).remove();this.parent=null},onParentHide:function(){if(this.__ebox){this.__ebox.setFloating_(false);this.__ebox.close()}},bind_:function(){this.$supers(zul.inp.Errorbox,"bind_",arguments);var a=zul.inp.Errorbox;this._drag=new zk.Draggable(this,null,{starteffect:zk.$void,endeffect:a._enddrag,ignoredrag:a._ignoredrag,change:a._change});zWatch.listen({onScroll:this})},unbind_:function(){this._drag.destroy();zWatch.unlisten({onScroll:this});if(this.parent){zWatch.unlisten({onHide:[this.parent,this.onParentHide]})}this.$supers(zul.inp.Errorbox,"unbind_",arguments);this._drag=null},onScroll:function(a){if(a){this.position(this.parent,null,"end_before",{overflow:true});this._fixarrow()}},setDomVisible_:function(b,c){this.$supers("setDomVisible_",arguments);var a=this._stackup;if(a){a.style.display=c?"":"none"}},doMouseMove_:function(a){var d=a.domTarget;if(d==this.$n("c")){var e=a.pageY,c=jq(d),b=zk.parseInt(c.css("padding-right"));offs=c.zk.revisedOffset();c[e>=offs[1]&&e<offs[1]+b?"addClass":"removeClass"]("z-errbox-close-over")}else{this.$supers("doMouseMove_",arguments)}},doMouseOut_:function(a){var b=a.domTarget;if(b==this.$n("c")){jq(b).removeClass("z-errbox-close-over")}else{this.$supers("doMouseOut_",arguments)}},doClick_:function(a){var b=a.domTarget;if(b==this.$n("c")){if((b=this.parent)&&b.clearErrorMessage){b.clearErrorMessage(true,true)}else{zAu.wrongValue_(b,false)}}else{this.$supers("doClick_",arguments);this.parent.focus(0)}},open:function(){this.$supers("open",arguments);this.setTopmost();this._fixarrow()},prologHTML_:function(a){var b=this.uuid;a.push('<div id="',b);a.push('-a" class="z-errbox-left z-arrow" title="');a.push(zUtl.encodeXML(msgzk.GOTO_ERROR_FIELD));a.push('"><div id="',b,'-c" class="z-errbox-right z-errbox-close"><div class="z-errbox-center">');a.push(zUtl.encodeXML(this.msg,{multiline:true}));a.push("</div></div></div>")},onFloatUp:function(a){var d=a.origin;if(d==this){this.setTopmost();return}if(!d||d==this.parent||!this.isVisible()){return}var c=this,b=d;while((c=c.parent)&&!c.isFloating_()){}for(;b&&!b.isFloating_();b=b.parent){}if(c==b){var e=d.$n();if(e){this._uncover(e)}}},_uncover:function(a){var h=zk(a).cmOffset(),e=this.$n(),c=zk(e).cmOffset();if(jq.isOverlapped(h,[a.offsetWidth,a.offsetHeight],c,[e.offsetWidth,e.offsetHeight])){var j=this.parent.$n(),i;var g=zk(j).cmOffset(),d=j.offsetHeight,b=g[1]+d;i=h[1]+a.offsetHeight<=b?b:g[1]-e.offsetHeight;var f=zk(e).toStyleOffset(0,i);e.style.top=f[1]+"px";this._fixarrow()}},_fixarrow:function(){var e=this.parent.$n(),f=this.$n(),g=this.$n("a"),b=zk(e).revisedOffset(),h=zk(f).revisedOffset();var c=h[0]-b[0],a=h[1]-b[1],d;if(c>=e.offsetWidth-2){d=a<-10?"ld":a>=e.offsetHeight-2?"lu":"l"}else{if(c<0){d=a<-10?"rd":a>=e.offsetHeight-2?"ru":"r"}else{d=a<0?"d":"u"}}g.className="z-errbox-left z-arrow-"+d}},{_enddrag:function(b){var a=b.control;a.setTopmost();a._fixarrow()},_ignoredrag:function(b,d,a){var e=b.control.$n("c");return a.domTarget==e&&jq(e).hasClass("z-errbox-close-over")},_change:function(d){var c=d.control,a=c._stackup;if(a){var b=c.$n();a.style.top=b.style.top;a.style.left=b.style.left}c._fixarrow()}});
zkreg('zul.inp.Errorbox');zul.inp.SimpleConstraint=zk.$extends(zk.Object,{$init:function(e,d,f){if(typeof e=="string"){this._flags={};this._init(e)}else{this._flags=typeof e=="number"?this._cvtNum(e):e||{};this._regex=typeof d=="string"?new RegExp(d):d;this._errmsg=f;if(this._flags.SERVER){this.serverValidate=true}}},_init:function(d){l_out:for(var c=0,b=0,a=d.length;b>=0;c=b+1){for(;;++c){if(c>=a){return}var f=d.charAt(c);if(f=="/"){for(b=++c;;++b){if(b>=a){b=-1;break}f=d.charAt(b);if(f=="/"){break}if(f=="\\"){++b}}this._regex=new RegExp(b>=0?d.substring(c,b):d.substring(c));continue l_out}if(f==":"){this._errmsg=d.substring(c+1).trim();return}if(!zUtl.isChar(f,{whitespace:1})){break}}var e;for(b=c;;++b){if(b>=a){e=d.substring(c);b=-1;break}var f=d.charAt(b);if(f==","||f==":"||f==";"||f=="/"){if(this._regex&&c==b){c++;continue}e=d.substring(c,b);if(f==":"||f=="/"){--b}break}}this.parseConstraint_(e.trim().toLowerCase())}},getFlags:function(){return tis._flags},parseConstraint_:function(a){var b=this._flags;if(a=="no positive"){b.NO_POSITIVE=true}else{if(a=="no negative"){b.NO_NEGATIVE=true}else{if(a=="no zero"){b.NO_ZERO=true}else{if(a=="no empty"){b.NO_EMPTY=true}else{if(a=="no future"){b.NO_FUTURE=true}else{if(a=="no past"){b.NO_PAST=true}else{if(a=="no today"){b.NO_TODAY=true}else{if(a=="strict"){b.STRICT=true}else{if(a=="server"){b.SERVER=true;this.serverValidate=true}else{if(zk.debugJS){zk.error("Unknown constraint: "+a)}}}}}}}}}}},_cvtNum:function(a){var b={};if(a&1){b.NO_POSITIVE=b.NO_FUTURE=true}if(a&2){b.NO_NEGATIVE=b.NO_PAST=true}if(a&4){b.NO_ZERO=b.NO_TODAY=true}if(a&256){b.NO_EMPTY=true}if(a&512){b.STRICT=true}return b},validate:function(i,h){var e=this._flags,g=this._errmsg;switch(typeof h){case"string":if(e.NO_EMPTY&&(!h||!h.trim())){return g||msgzul.EMPTY_NOT_ALLOWED}var d=this._regex;if(d&&!d.test(h)){return g||msgzul.ILLEGAL_VALUE}if(e.STRICT&&h&&i.validateStrict){g=i.validateStrict(h);if(g){return g}}return;case"number":if(h>0){if(e.NO_POSITIVE){return g||this._msgNumDenied()}}else{if(h==0){if(e.NO_ZERO){return g||this._msgNumDenied()}}else{if(e.NO_NEGATIVE){return g||this._msgNumDenied()}}}return}if(h&&h.getFullYear){var c=zUtl.today(),h=new Date(h.getFullYear(),h.getMonth(),h.getDate());if((c-h)/86400000<0){if(e.NO_FUTURE){return g||this._msgDateDenied()}}else{if(h-c==0){if(e.NO_TODAY){return g||this._msgDateDenied()}}else{if(e.NO_PAST){return g||this._msgDateDenied()}}}return}if(h&&h.compareTo){var a=h.compareTo(0);if(a>0){if(e.NO_POSITIVE){return g||this._msgNumDenied()}}else{if(a==0){if(e.NO_ZERO){return g||this._msgNumDenied()}}else{if(e.NO_NEGATIVE){return g||this._msgNumDenied()}}}return}if(!h&&e.NO_EMPTY){return g||msgzul.EMPTY_NOT_ALLOWED}},_msgNumDenied:function(){var a=this._flags,b=this._errmsg;if(a.NO_POSITIVE){return b||(a.NO_ZERO?a.NO_NEGATIVE?msgzul.NO_POSITIVE_NEGATIVE_ZERO:msgzul.NO_POSITIVE_ZERO:a.NO_NEGATIVE?msgzul.NO_POSITIVE_NEGATIVE:msgzul.NO_POSITIVE)}else{if(a.NO_NEGATIVE){return b||(a.NO_ZERO?msgzul.NO_NEGATIVE_ZERO:msgzul.NO_NEGATIVE)}else{if(a.NO_ZERO){return b||msgzul.NO_ZERO}}}return b||msgzul.ILLEGAL_VALUE},_msgDateDenied:function(){var a=this._flags,b=this._errmsg;if(a.NO_FUTURE){return b||(a.NO_TODAY?a.NO_PAST?NO_FUTURE_PAST_TODAY:msgzul.NO_FUTURE_TODAY:a.NO_PAST?msgzul.NO_FUTURE_PAST:msgzul.NO_FUTURE)}else{if(a.NO_PAST){return b||(a.NO_TODAY?msgzul.NO_PAST_TODAY:msgzul.NO_PAST)}else{if(a.NO_TODAY){return b||msgzul.NO_TODAY}}}return b||msgzul.ILLEGAL_VALUE}});
zul.inp.SimpleSpinnerConstraint=zk.$extends(zul.inp.SimpleConstraint,{$define:{min:_zkf=function(){},max:_zkf},parseConstraint_:function(c){var e=c.replace(/ +/g," ").split(/[, ]/),b=e.length,a;for(var d=0;d<b+1;d++){if(e[d]=="min"){this._min=e[++d]*1;a=true}else{if(e[d]=="max"){this._max=e[++d]*1;a=true}}}if(a){return}else{return this.$supers("parseConstraint_",arguments)}},validate:function(c,b){switch(typeof b){case"number":if((this._max&&b>this._max)||(this._min&&b<this._min)){var a=msgzul.OUT_OF_RANGE+": ";a+="("+this._min!=null?this._max!=null?this._min+" ~ "+this._max:">= "+this._min:"<= "+this._max+")"}}if(a){return a}else{return this.$supers("validate",arguments)}}});
zul.inp.SimpleDateConstraint=zk.$extends(zul.inp.SimpleConstraint,{format:"yyyyMMdd",parseConstraint_:function(b){if(b.startsWith("between")){var a=b.indexOf("and",7);if(a<0&&zk.debugJS){zk.error("Unknown constraint: "+b)}this._beg=new zk.fmt.Calendar().parseDate(b.substring(7,a),this.format);this._end=new zk.fmt.Calendar().parseDate(b.substring(a+3),this.format);if(this._beg.getTime()>this._end.getTime()){var c=this._beg;this._beg=this._end;this._end=c}this._beg.setHours(0);this._beg.setMinutes(0);this._beg.setSeconds(0);this._beg.setMilliseconds(0);this._end.setHours(0);this._end.setMinutes(0);this._end.setSeconds(0);this._end.setMilliseconds(0);return}else{if(b.startsWith("before")){this._end=new zk.fmt.Calendar().parseDate(b.substring(6),this.format);this._end.setHours(0);this._end.setMinutes(0);this._end.setSeconds(0);this._end.setMilliseconds(0);return}else{if(b.startsWith("after")){this._beg=new zk.fmt.Calendar().parseDate(b.substring(5),this.format);this._beg.setHours(0);this._beg.setMinutes(0);this._beg.setSeconds(0);this._beg.setMilliseconds(0);return}}}return this.$supers("parseConstraint_",arguments)},validate:function(c,b){if(typeof b.getTime=="function"){var a=new Date(b.getFullYear(),b.getMonth(),b.getDate());if(this._beg!=null&&this._beg.getTime()>a.getTime()){return this.outOfRangeValue()}if(this._end!=null&&this._end.getTime()<a.getTime()){return this.outOfRangeValue()}}return this.$supers("validate",arguments)},outOfRangeValue:function(){return msgzul.OUT_OF_RANGE+": "+(this._beg!=null?this._end!=null?new zk.fmt.Calendar().formatDate(this._beg,this.format)+" ~ "+new zk.fmt.Calendar().formatDate(this._end,this.format):">= "+new zk.fmt.Calendar().formatDate(this._beg,this.format):"<= "+new zk.fmt.Calendar().formatDate(this._end,this.format))}});
zul.inp.Textbox=zk.$extends(zul.inp.InputWidget,{_value:"",_rows:1,$define:{multiline:function(){this.rerender()},tabbable:null,rows:function(a){var b=this.getInputNode();if(b&&this.isMultiline()){b.rows=a}},type:function(a){var b=this.getInputNode();if(b){b.type=a}}},textAttrs_:function(){var a=this.$supers("textAttrs_",arguments);if(this._multiline){a+=' rows="'+this._rows+'"'}return a},getZclass:function(){var a=this._zclass;return a!=null?a:"z-textbox"}});
zkreg('zul.inp.Textbox');zk._m={};
zk._m['default']=function(a){if(this.isMultiline()){a.push("<textarea",this.domAttrs_(),">",this._areaText(),"</textarea>")}else{a.push("<input",this.domAttrs_(),"/>")}};
;zkmld(zk._p.p.Textbox,zk._m);zul.inp.FormatWidget=zk.$extends(zul.inp.InputWidget,{$define:{format:function(){var a=this.getInputNode();if(a){a.value=this.coerceToString_(this._value)}}},setValue:function(c){var b;if(c){b=[];for(var a=arguments.length;--a>0;){b.unshift(arguments[a])}b.unshift((typeof c=="string")?this.coerceFromString_(c):c)}else{b=arguments}this.$supers("setValue",b)}});
zul.inp.Intbox=zk.$extends(zul.inp.FormatWidget,{intValue:function(){return this.$supers("getValue",arguments)},coerceFromString_:function(a){if(!a){return null}var b=zk.fmt.Number.unformat(this._format,a),c=parseInt(b.raw,10);if(isNaN(c)||(b.raw!=""+c&&b.raw!="-"+c)){return{error:zk.fmt.Text.format(msgzul.INTEGER_REQUIRED,a)}}if(c>2147483647||c<-2147483648){return{error:zk.fmt.Text.format(msgzul.OUT_OF_RANGE+"(−2147483648 - 2147483647)")}}if(b.divscale){c=Math.round(c/Math.pow(10,b.divscale))}return c},coerceToString_:function(b){var a=this._format;return a?zk.fmt.Number.format(a,b,this._rounding):b!=null?""+b:""},getZclass:function(){var a=this._zclass;return a!=null?a:"z-intbox"},doKeyPress_:function(a){if(!this._shallIgnore(a,zul.inp.InputWidget._allowKeys)){this.$supers("doKeyPress_",arguments)}}});
zkreg('zul.inp.Intbox');zk._m={};
zk._m['default']=function(a){a.push("<input",this.domAttrs_(),"/>")};
;zkmld(zk._p.p.Intbox,zk._m);zul.inp.Longbox=zk.$extends(zul.inp.FormatWidget,{coerceFromString_:function(b){if(!b){return null}var c=zk.fmt.Number.unformat(this._format,b),d=new zk.Long(c.raw),a=d.$toString();if(c.raw!=a&&c.raw!="-"+a){return{error:zk.fmt.Text.format(msgzul.INTEGER_REQUIRED,b)}}if(this._isOutRange(c.raw)){return{error:zk.fmt.Text.format(msgzul.OUT_OF_RANGE+"(−9223372036854775808 - 9223372036854775807)")}}return d},coerceToString_:function(b){var a=this._format;return b!=null?typeof b=="string"?b:a?zk.fmt.Number.format(a,b.$toString(),this._rounding):b.$toLocaleString():""},getZclass:function(){var a=this._zclass;return a!=null?a:"z-longbox"},doKeyPress_:function(a){if(!this._shallIgnore(a,zul.inp.InputWidget._allowKeys)){this.$supers("doKeyPress_",arguments)}},_isOutRange:function(d){var c=d.charAt(0)=="-";if(c){d=d.substring(1)}if(d.length>19){return true}if(d.length<19){return false}var b=c?"9223372036854775808":"9223372036854775807";for(var a=0;a<19;++a){if(d.charAt(a)>b.charAt(a)){return true}if(d.charAt(a)<b.charAt(a)){return false}}return false}});
zkreg('zul.inp.Longbox');zk._m={};
zk._m['default']=[zk._p.p.Intbox,'default'];zkmld(zk._p.p.Longbox,zk._m);(function(){var a=zul.inp.InputWidget._allowKeys+zk.DECIMAL+zk.PERCENT+zk.GROUPING+"e";zul.inp.Doublebox=zk.$extends(zul.inp.FormatWidget,{coerceFromString_:function(j){if(!j){return null}var d=zk.fmt.Number.unformat(this._format,j),k=d.raw,c=parseFloat(k),e=""+c,i=e.indexOf("."),g=k.indexOf(".");if(g==0){k="0"+k;++g}if(g>=0&&k.substring(k.substring(g+1))&&i<0){i=e.length;e+="."}var f=k.length,b=e.length;if(i>=0&&i<g){b-=i;f-=g;for(var h=g-i;h-->0;){e="0"+e}}if(b<f){for(var h=f-b;h-->0;){e+="0"}}if(isNaN(c)||(k!=e&&k!="-"+e&&k.indexOf("e")<0)){return{error:zk.fmt.Text.format(msgzul.NUMBER_REQUIRED,j)}}if(d.divscale){c=c/Math.pow(10,d.divscale)}return c},_allzero:function(c){for(var b=c.length;b-->0;){if(c.charAt(b)!="0"){return false}}return true},coerceToString_:function(c){var b=this._format;return c==null?"":b?zk.fmt.Number.format(b,c,this._rounding):zk.DECIMAL=="."?(""+c):(""+c).replace(".",zk.DECIMAL)},getZclass:function(){var b=this._zclass;return b!=null?b:"z-doublebox"},doKeyPress_:function(b){if(!this._shallIgnore(b,a)){this.$supers("doKeyPress_",arguments)}}})})();
zkreg('zul.inp.Doublebox');zk._m={};
zk._m['default']=[zk._p.p.Intbox,'default'];zkmld(zk._p.p.Doublebox,zk._m);(function(){var a=zul.inp.InputWidget._allowKeys+zk.DECIMAL+zk.PERCENT+zk.GROUPING;zul.inp.Decimalbox=zk.$extends(zul.inp.FormatWidget,{coerceFromString_:function(c){if(!c){return null}var d=zk.fmt.Number.unformat(this._format,c),e=new zk.BigDecimal(d.raw),b=e.$toString();if(d.raw!=b&&d.raw!="-"+b){return{error:zk.fmt.Text.format(msgzul.NUMBER_REQUIRED,c)}}if(d.divscale){e.setPrecision(e.getPrecision()+d.divscale)}return e},coerceToString_:function(c){var b=this._format;return c!=null?typeof c=="string"?c:b?zk.fmt.Number.format(b,c.$toString(),this._rounding):c.$toLocaleString():""},getZclass:function(){var b=this._zclass;return b!=null?b:"z-decimalbox"},doKeyPress_:function(b){if(!this._shallIgnore(b,a)){this.$supers("doKeyPress_",arguments)}}})})();
zkreg('zul.inp.Decimalbox');zk._m={};
zk._m['default']=[zk._p.p.Intbox,'default'];zkmld(zk._p.p.Decimalbox,zk._m);zul.inp.ComboWidget=zk.$extends(zul.inp.InputWidget,{_buttonVisible:true,$define:{buttonVisible:function(a){var d=this.$n("btn"),b=this.getZclass();if(d){if(!this.inRoundedMold()){jq(d)[a?"show":"hide"]();jq(this.getInputNode())[a?"removeClass":"addClass"](b+"-right-edge")}else{var c=a?"removeClass":"addClass";jq(d)[c](b+"-btn-right-edge");if(zk.ie6_){jq(d)[c](b+(this._readonly?"-btn-right-edge-readonly":"-btn-right-edge"));if(jq(this.getInputNode()).hasClass(b+"-text-invalid")){jq(d)[c](b+"-btn-right-edge-invalid")}}}this.onSize()}},autodrop:null},setWidth:function(){this.$supers("setWidth",arguments);if(this.desktop){this.onSize()}},onSize:_zkf=function(){var a=this.getWidth();if(!a||a.indexOf("%")!=-1){this.getInputNode().style.width=""}this.syncWidth()},onShow:_zkf,onFloatUp:function(b){if(jq(this.$n("pp")).is(":animated")||(!this._inplace&&!this.isOpen())){return}var c=b.origin;if(!zUtl.isAncestor(this,c)){if(this.isOpen()){this.close({sendOnOpen:true})}if(this._inplace){var d=this.$n(),a=this.getInplaceCSS();if(jq(d).hasClass(a)){return}d.style.width=jq.px0(zk(d).revisedWidth(d.offsetWidth));jq(this.getInputNode()).addClass(a);jq(d).addClass(a);this.onSize();d.style.width=this.getWidth()||""}}},onResponse:function(d,e){if(e.rtags.onOpen&&this.isOpen()){if(zk.animating()){var c=this;setTimeout(function(){c.onResponse(d,e)},50);return}var a=this.$n("pp"),b=this.getPopupSize_(a);a.style.height=b[1];if(!zk.ie6_){a.style.width=b[0]}this._fixsz(b)}},setOpen:function(a,b){if(a){this.open(b)}else{this.close(b)}},isOpen:function(){return this._open},open:function(a){if(this._open){return}this._open=true;if(a&&a.focus){this.focus()}var b=this.$n("pp"),f=this.getInputNode();if(!b){return}zWatch.fire("onFloatUp",this);var i=this.setTopmost();var g=this.getPopupSize_(b);b.style.width=g[0];b.style.height="auto";b.style.zIndex=i>0?i:1;var c=this.$n("cave");if(c){c.style.width=c.style.height="auto"}b.style.position="absolute";b.style.display="block";b.style.visibility="hidden";b.style.left="-10000px";var l=zk(b);l.makeVParent();b.style.left="";this._fixsz(g);l.position(f,"after_start");b.style.display="none";b.style.visibility="";zk(b).slideDown(this,{afterAnima:this._afterSlideDown});if(zk.gecko){var k=c?c.rows:null;if(k){var h=b.offsetHeight-b.clientHeight;if(h>10&&b.offsetHeight<150){var d=0;for(var e=k.length;e--;){d+=k[e].offsetHeight}b.style.height=(d+20)+"px"}}}if(!this._shadow){this._shadow=new zk.eff.Shadow(b,{left:-4,right:4,top:-2,bottom:3})}if(a&&a.sendOnOpen){this.fire("onOpen",{open:true,value:f.value},{rtags:{onOpen:1}})}},zsync:function(){this.$supers("zsync",arguments);if(!zk.css3&&this.isOpen()&&this._shadow){this._shadow.sync()}},_afterSlideDown:function(a){if(this._shadow){this._shadow.sync()}},close:function(c){if(!this._open){return}if(zk.animating()){var b=this;setTimeout(function(){b.close(c)},50);return}this._open=false;if(c&&c.focus){this.focus()}var a=this.$n("pp");if(!a){return}a.style.display="none";zk(a).undoVParent();if(this._shadow){this._shadow.destroy();this._shadow=null}var d=this.$n("btn");if(d){jq(d).removeClass(this.getZclass()+"-btn-over")}if(c&&c.sendOnOpen){this.fire("onOpen",{open:false,value:this.getInputNode().value},{rtags:{onOpen:1}})}zWatch.fireDown("onHide",this)},_fixsz:function(d){var c=this.$n("pp");if(!c){return}var b=this.$n("cave");if(d[1]=="auto"&&c.offsetHeight>250){c.style.height="250px"}else{if(c.offsetHeight<10){c.style.height="10px"}}if(d[0]=="auto"){var a=this.$n();if(c.offsetWidth<a.offsetWidth){c.style.width=a.offsetWidth+"px";if(b){b.style.width="100%"}}else{var e=jq.innerWidth()-20;if(e<a.offsetWidth){e=a.offsetWidth}if(c.offsetWidth>e){c.style.width=e}}}},dnPressed_:zk.$void,upPressed_:zk.$void,otherPressed_:zk.$void,enterPressed_:function(a){this.close({sendOnOpen:true});this.updateChange_();a.stop()},escPressed_:function(a){this.close({sendOnOpen:true});a.stop()},getPopupSize_:function(a){return["auto","auto"]},redraw_:function(a){var b=this.uuid,c=this.getZclass();a.push("<i",this.domAttrs_({text:true}),'><input id="',b,'-real" class="',c,'-inp" autocomplete="off"',this.textAttrs_(),'/><i id="',b,'-btn" class="',c,"-btn");if(this.inRoundedMold()){if(!this._buttonVisible){a.push(" ",c,"-btn-right-edge")}if(this._readonly){a.push(" ",c,"-btn-readonly")}if(zk.ie6_&&!this._buttonVisible&&this._readonly){a.push(" ",c,"-btn-right-edge-readonly")}}else{if(!this._buttonVisible){a.push('" style="display:none')}}a.push('"></i>');this.redrawpp_(a);a.push("</i>")},redrawpp_:function(a){},syncWidth:function(){var e=this.$n();if(!zk(e).isRealVisible()||(!this._inplace&&!e.style.width)){return}if(this._buttonVisible&&this._inplace){if(!e.style.width){var c=jq(e),f=this.getInplaceCSS();c.removeClass(f);if(zk.opera){e.style.width=jq.px0(zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth())}else{e.style.width=jq.px0(zk(e).revisedWidth(e.offsetWidth))}c.addClass(f)}}var d=this.getInputNode();if(zk.ie6_){d.style.width=jq.px(0)}var b=zk.opera?zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth():zk(e).revisedWidth(e.offsetWidth),a=this.$n("btn");d.style.width=jq.px0(zk(d).revisedWidth(b-(a?a.offsetWidth:0)))},doFocus_:function(a){var b=this.$n();if(this._inplace){b.style.width=jq.px0(zk(b).revisedWidth(b.offsetWidth))}this.$supers("doFocus_",arguments);if(this._inplace){if(jq(b).hasClass(this.getInplaceCSS())){jq(b).removeClass(this.getInplaceCSS());this.onSize()}}},doBlur_:function(a){var b=this.$n();if(this._inplace&&this._inplaceout){b.style.width=jq.px0(zk(b).revisedWidth(b.offsetWidth))}this.$supers("doBlur_",arguments);if(this._inplace&&this._inplaceout){jq(b).addClass(this.getInplaceCSS());this.onSize();b.style.width=this.getWidth()||""}},afterKeyDown_:function(a){if(this._inplace){jq(this.$n()).toggleClass(this.getInplaceCSS(),a.keyCode==13?null:false)}this.$supers("afterKeyDown_",arguments)},bind_:function(){this.$supers(zul.inp.ComboWidget,"bind_",arguments);var a=this.$n("btn"),b=this.getInputNode();if(this._inplace){jq(b).addClass(this.getInplaceCSS())}if(a){this._auxb=new zul.Auxbutton(this,a,b);this.domListen_(a,"onClick","_doBtnClick")}if(this._readonly&&!this.inRoundedMold()){jq(b).addClass(this.getZclass()+"-right-edge")}zWatch.listen({onSize:this,onShow:this,onFloatUp:this,onResponse:this});if(!zk.css3){jq.onzsync(this)}this.setFloating_(true,{node:this.$n("pp")})},unbind_:function(){this.close();var a=this.$n("btn");if(a){this._auxb.cleanup();this._auxb=null;this.domUnlisten_(a,"onClick","_doBtnClick")}zWatch.unlisten({onSize:this,onShow:this,onFloatUp:this,onResponse:this});if(!zk.css3){jq.unzsync(this)}this.$supers(zul.inp.ComboWidget,"unbind_",arguments)},_doBtnClick:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}if(!this._disabled&&!zk.animating()){if(this._open){this.close({focus:true,sendOnOpen:true})}else{this.open({focus:true,sendOnOpen:true})}}a.stop()},doKeyDown_:function(a){this._doKeyDown(a);if(!a.stopped){this.$supers("doKeyDown_",arguments)}},doClick_:function(a){if(!this._disabled){if(a.domTarget==this.$n("pp")){this.close({focus:true,sendOnOpen:true})}else{if(this._readonly&&!this.isOpen()&&this._buttonVisible){this.open({focus:true,sendOnOpen:true})}}this.$supers("doClick_",arguments)}},_doKeyDown:function(a){var d=a.keyCode,b=this._open;if(d==9||(zk.safari&&d==0)){if(b){this.close({sendOnOpen:true})}return}if(a.altKey&&(d==38||d==40)){if(b){this.close({sendOnOpen:true})}else{this.open({sendOnOpen:true})}var c={propagation:true};if(zk.ie){c.dom=true}a.stop(c);return}if(b&&(d==13||d==27)){if(d==13){this.enterPressed_(a)}else{this.escPressed_(a)}return}if(d==18||d==27||d==13||(d>=112&&d<=123)){return}if(this._autodrop&&!b){this.open({sendOnOpen:true})}if(d==38){this.upPressed_(a)}else{if(d==40){this.dnPressed_(a)}else{this.otherPressed_(a)}}},onChildAdded_:_zkf=function(a){if(this._shadow){this._shadow.sync()}},onChildRemoved_:_zkf,onChildVisible_:_zkf});
zul.inp.Combobox=zk.$extends(zul.inp.ComboWidget,{_autocomplete:true,$define:{autocomplete:null,repos:function(){if(this.desktop){var b=this.getInputNode(),a;b.value=this.valueEnter_!=null?this.valueEnter_:this._value||"";if(zk.ie&&b.value){a=b.value.length;a=[a,a]}this._typeahead(this._bDel,a);this._bDel=null}this._repos=false}},setValue:function(a){this.$supers("setValue",arguments);this._reIndex();this.valueEnter_=null},_reIndex:function(){var b=this.getValue();if(!this._sel||b!=this._sel.getLabel()){if(this._sel){var c=this._sel.$n();if(c){jq(c).removeClass(this._sel.getZclass()+"-seld")}}this._sel=this._lastsel=null;for(var a=this.firstChild;a;a=a.nextSibling){if(b==a.getLabel()){this._sel=a;break}}}},validateStrict:function(a){return this._findItem(a,true)?null:msgzul.VALUE_NOT_MATCHED},_findItem:function(b,a){return this._findItem0(b,a)},_findItem0:function(g,a,e,b){var f=this.firstChild;if(f&&g){g=g.toLowerCase();var d=this._sel;if(!d||d.parent!=this){d=f}for(var c=b?d.nextSibling?d.nextSibling:f:d;;){if((!a||!c.isDisabled())&&c.isVisible()&&(e?c.getLabel().toLowerCase().startsWith(g):g==c.getLabel().toLowerCase())){return c}if(!(c=c.nextSibling)){c=f}if(c==d){break}}}},_hilite:function(a){this._hilite2(this._findItem(this.getInputNode().value,this._isStrict()||(a&&a.strict)),a)},_hilite2:function(d,c){if(!c){c={}}var a=this._sel;this._sel=d;if(a&&a.parent==this){var f=a.$n();if(f){jq(f).removeClass(a.getZclass()+"-seld")}}if(d&&!d.isDisabled()){jq(d.$n()).addClass(d.getZclass()+"-seld")}if(c.sendOnSelect&&this._lastsel!=d){this._lastsel=d;if(d){var b=this.getInputNode(),e=d.getLabel();this.valueEnter_=b.value=e;zk(b).setSelectionRange(0,e.length)}if(c.sendOnChange){this.$supers("updateChange_",[])}this.fire("onSelect",{items:d?[d]:[],reference:d})}},_isStrict:function(){var a=this.getConstraint();return a&&a._flags&&a._flags.STRICT},open:function(a){this.$supers("open",arguments);this._hilite()},dnPressed_:function(a){this._updnSel(a)},upPressed_:function(a){this._updnSel(a,true)},_updnSel:function(j,g){var d=this.getInputNode(),b=d.value,a,i;if(b){b=b.toLowerCase();var e=this._sel,h=this._next(null,!g);if(!e||e.parent!=this){e=this._next(null,g)}for(var k=e;;){if(!k.isDisabled()&&k.isVisible()){var f=k.getLabel().toLowerCase();if(b==f){a=k;break}else{if(!i&&f.startsWith(b)){i=k;break}}}if((k=this._next(k,g))==e){break}}if(!a){a=i}if(a){var c=zk(d).getSelectionRange();if(c[0]==0&&c[1]==b.length){a=this._next(a,g)}}else{a=this._next(null,g)}}else{a=this._next(null,true)}if(a){zk(a).scrollIntoView(this.$n("pp"))}this._select(a,{sendOnSelect:true});j.stop()},_next:(function(){function a(e,d,c){var b=d?"previousSibling":"nextSibling";for(var f=c?e:e[b];f;f=f[b]){if(!f.isDisabled()){return f}}return null}return function(c,b){if(c){c=a(c,b)}return c?c:a(b?this.firstChild:this.lastChild,!b,true)}})(),_select:function(c,b){var a=this.getInputNode(),d=a.value=c?c.getLabel():"";this.valueSel_=d;this._hilite2(c,b);if(d){zk(a).setSelectionRange(0,d.length)}},otherPressed_:function(b){var f=this,e=b.keyCode,a;this._bDel=a=e==8||e==46;if(this._readonly){switch(e){case 35:case 36:this._hilite2();this.getInputNode().value="";case 37:case 39:this._updnSel(b,e==37||e==35);break;case 8:b.stop();break;default:var c=String.fromCharCode(e);var d=this._findItem0(c,true,true,!!this._sel);if(d){this._select(d,{sendOnSelect:true})}}}else{setTimeout(function(){f._typeahead(a)},zk.opera||zk.safari?10:0)}},_typeahead:function(a,e){if(zk.currentFocus!=this){return}var c=this.getInputNode(),g=c.value,e=e||zk(c).getSelectionRange(),f=this.firstChild;this.valueEnter_=g;if(!g||!f||e[0]!=g.length||e[0]!=e[1]){return this._hilite({strict:true})}var d=this._findItem(g,true);if(d||a||!this._autocomplete){return this._hilite2(d)}g=g.toLowerCase();var d=this._sel;if(!d||d.parent!=this){d=f}for(var b=d;;){if(!b.isDisabled()&&b.isVisible()&&b.getLabel().toLowerCase().startsWith(g)){c.value=b.getLabel();zk(c).setSelectionRange(g.length,c.value.length);this._hilite2(b);return}if(!(b=b.nextSibling)){b=f}if(b==d){this._hilite2();return}}},updateChange_:function(){if(this.$supers("updateChange_",arguments)){this._hilite({sendOnSelect:true});return true}this.valueEnter_=null},unbind_:function(){this._hilite2();this._sel=this._lastsel=null;this.$supers(zul.inp.Combobox,"unbind_",arguments)},getZclass:function(){var a=this._zclass;return a?a:"z-combobox"+(this.inRoundedMold()?"-rounded":"")},redrawpp_:function(b){var c=this.uuid;b.push('<div id="',c,'-pp" class="',this.getZclass(),'-pp" style="display:none" tabindex="-1"><table id="',c,'-cave"',zUtl.cellps0,">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</table></div>")}});
zkreg('zul.inp.Combobox');zk._m={};
zk._m['rounded']=zul.inp.Combobox.prototype.redraw_;
;zk._m['default']=[zk._p.p.Combobox,'rounded'];zkmld(zk._p.p.Combobox,zk._m);zul.inp.Comboitem=zk.$extends(zul.LabelImageWidget,{$define:{disabled:function(a){var c=this.$n();if(c){var b=this.getZclass()+"-disd";a?jq(c).addClass(b):jq(c).removeClass(b)}},description:_zkf=function(){this.rerender()},content:_zkf},domLabel_:function(){return zUtl.encodeXML(this.getLabel(),{pre:1})},doMouseOver_:function(){if(!this._disabled){var c=this.$n(),a=jq(c),b=this.getZclass();a.addClass(a.hasClass(b+"-seld")?b+"-over-seld":b+"-over")}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(){if(!this._disabled){this._doMouseOut()}this.$supers("doMouseOut_",arguments)},_doMouseOut:function(){var b=this.$n(),a=this.getZclass();jq(b).removeClass(a+"-over").removeClass(a+"-over-seld")},doClick_:function(a){if(!this._disabled){this._doMouseOut();this.parent._select(this,{sendOnSelect:true,sendOnChange:true});this.parent.close({sendOnOpen:true});this.parent._shallClose=true;a.stop()}},domClass_:function(c){var a=this.$supers("domClass_",arguments);if(this._disabled&&(!c||!c.zclass)){var b=this.getZclass();a+=" "+b+"-disd"}return a},getZclass:function(){var a=this._zclass;return a!=null?a:"z-comboitem"}});
zkreg('zul.inp.Comboitem');zk._m={};
zk._m['default']=function(b){var c=this.getZclass();b.push("<tr",this.domAttrs_({text:true}),'><td class="',c,'-img">',this.domImage_(),'</td><td class="',c,'-text">',this.domLabel_());var a;if(a=this._description){b.push('<br/><span class="',c,'-inner">',zUtl.encodeXML(a),"</span>")}if(a=this._content){b.push('<span class="',c,'-cnt">',a,"</span>")}b.push("</td></tr>")};
;zkmld(zk._p.p.Comboitem,zk._m);zul.inp.Bandbox=zk.$extends(zul.inp.ComboWidget,{getPopupSize_:function(b){var d=this.firstChild,a,c;if(d){a=d._hflex=="min"&&d._hflexsz?jq.px0(d._hflexsz):d.getWidth();c=d._vflex=="min"&&d._vflexsz?jq.px0(d._vflexsz):d.getHeight()}return[a||"auto",c||"auto"]},getZclass:function(){var a=this._zclass;return a!=null?a:"z-bandbox"+(this.inRoundedMold()?"-rounded":"")},redrawpp_:function(b){b.push('<div id="',this.uuid,'-pp" class="',this.getZclass(),'-pp" style="display:none" tabindex="-1">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div>")}});
zkreg('zul.inp.Bandbox');zk._m={};
zk._m['rounded']=zul.inp.Bandbox.prototype.redraw_;
;zk._m['default']=[zk._p.p.Bandbox,'rounded'];zkmld(zk._p.p.Bandbox,zk._m);zul.inp.Bandpopup=zk.$extends(zul.Widget,{getZclass:function(){var a=this._zclass;return a!=null?a:"z-bandpopup"},afterChildrenMinFlex_:function(b){if(b=="w"){var c=this.parent,a=c&&c.$n("pp");if(a){a.style.width=jq.px0(this._hflexsz);zk(a)._updateProp(["width"])}}}});
zkreg('zul.inp.Bandpopup',true);zk._m={};
zk._m['default']=function(b){b.push("<div",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div>")};
;zkmld(zk._p.p.Bandpopup,zk._m);zul.inp.Slider=zk.$extends(zul.Widget,{_orient:"horizontal",_curpos:0,_maxpos:100,_pageIncrement:10,_slidingtext:"{0}",$define:{orient:function(){if(this.isVertical()){this.setWidth("");this.setHeight("207px")}else{this.setWidth("207px");this.setHeight("")}this.rerender()},curpos:function(){if(this.desktop){this._fixPos()}},maxpos:function(){if(this._curpos>this._maxpos){this._curpos=this._maxpos;if(this.desktop){this._fixPos()}}},slidingtext:null,pageIncrement:null,name:function(){if(this.efield){this.efield.name=this._name}}},getZclass:function(){if(this._zclass!=null){return this._zclass}var a="z-slider";if(this.inScaleMold()){return a+"-scale"}else{if(this.inSphereMold()){return a+("horizontal"==this._orient?"-sphere-hor":"-sphere-ver")}else{return a+("horizontal"==this._orient?"-hor":"-ver")}}},doMouseOver_:function(a){jq(this.$n("btn")).addClass(this.getZclass()+"-btn-over");this.$supers("doMouseOver_",arguments)},doMouseOut_:function(a){jq(this.$n("btn")).removeClass(this.getZclass()+"-btn-over");this.$supers("doMouseOut_",arguments)},onup_:function(a){var b=zul.inp.Slider.down_btn;if(b){var c=zk.Widget.$(b),d=c.getZclass();jq(b).removeClass(d+"-btn-drag").removeClass(d+"-btn-over")}zul.inp.Slider.down_btn=null;jq(document).unbind("mouseup",c.onup_)},doMouseDown_:function(a){var b=this.$n("btn");jq(b).addClass(this.getZclass()+"-btn-drag");jq(document).mouseup(this.onup_);zul.inp.Slider.down_btn=b;this.$supers("doMouseDown_",arguments)},_makeDraggable:function(){this._drag=new zk.Draggable(this,this.$n("btn"),{constraint:this._orient||"horizontal",starteffect:this._startDrag,change:this._dragging,endeffect:this._endDrag})},_snap:function(b,e){var c=this.$n("btn"),d=zk(this.$n()).cmOffset();d=zk(c).toStyleOffset(d[0],d[1]);if(b<=d[0]){b=d[0]}else{var a=d[0]+this._getWidth();if(b>a){b=a}}if(e<=d[1]){e=d[1]}else{var a=d[1]+this._getHeight();if(e>a){e=a}}return[b,e]},_startDrag:function(b){var a=b.control;a.$n("btn").title="";a.slidepos=a._curpos;jq(document.body).append('<div id="zul_slidetip" class="z-slider-pp"style="position:absolute;display:none;z-index:60000;background-color:white;border: 1px outset">'+a.slidepos+"</div>");a.slidetip=jq("#zul_slidetip")[0];if(a.slidetip){a.slidetip.style.display="block";zk(a.slidetip).position(a.$n(),a.isVertical()?"end_before":"after_start")}},_dragging:function(b){var a=b.control,c=a._realpos();if(c!=a.slidepos){if(c>a._maxpos){c=a._maxpos}a.slidepos=c;if(a.slidetip){a.slidetip.innerHTML=a._slidingtext.replace(/\{0\}/g,c)}a.fire("onScrolling",c)}a._fixPos()},_endDrag:function(b){var a=b.control,c=a._realpos();a.fire("onScroll",c);a._fixPos();jq(a.slidetip).remove();a.slidetip=null},_realpos:function(f){var a=zk(this.$n("btn")).cmOffset(),e=zk(this.getRealNode()).cmOffset(),c=this._maxpos,g;if(this.isVertical()){var b=this._getHeight();g=b?Math.round(((a[1]-e[1])*c)/b):0}else{var d=this._getWidth();g=d?Math.round(((a[0]-e[0])*c)/d):0}return this._curpos=(g>=0?g:0)},_getWidth:function(){return this.getRealNode().clientWidth-this.$n("btn").offsetWidth+7},_getHeight:function(){return this.getRealNode().clientHeight-this.$n("btn").offsetHeight+7},_fixPos:_zkf=function(){var c=this.$n("btn");if(this.isVertical()){var b=this._getHeight(),a=b>0?Math.round((this._curpos*b)/this._maxpos):0,e=zk(this.getRealNode()).cmOffset();e=zk(c).toStyleOffset(e[0],e[1]);e=this._snap(0,e[1]+a);c.style.top=e[1]+"px"}else{var d=this._getWidth(),a=d>0?Math.round((this._curpos*d)/this._maxpos):0,e=zk(this.getRealNode()).cmOffset();e=zk(c).toStyleOffset(e[0],e[1]);e=this._snap(e[0]+a,0);c.style.left=e[0]+"px"}c.title=this._curpos;this.updateFormData(this._curpos)},onSize:_zkf,onShow:_zkf,inScaleMold:function(){return this.getMold()=="scale"},inSphereMold:function(){return this.getMold()=="sphere"},isVertical:function(){return"vertical"==this._orient},updateFormData:function(a){if(this._name){a=a||0;if(!this.efield){this.efield=jq.newHidden(this._name,a,this.$n())}else{this.efield.value=a}}},getRealNode:function(){return this.inScaleMold()?this.$n("real"):this.$n()},bind_:function(){this.$supers(zul.inp.Slider,"bind_",arguments);var a=this.$n("inner");if(this.isVertical()){this.$n("btn").style.top="0px";var b=this.getRealNode().clientHeight;if(b>0){a.style.height=(b+7)+"px"}else{a.style.height="214px"}}this._makeDraggable();zWatch.listen({onSize:this,onShow:this});this.updateFormData(this._curpos)},unbind_:function(){this.efield=null;if(this._drag){this._drag.destroy();this._drag=null}zWatch.unlisten({onSize:this,onShow:this});this.$supers(zul.inp.Slider,"unbind_",arguments)}});
zkreg('zul.inp.Slider');zk._m={};
zk._m['scale']=function(b){var d=this.getZclass(),a=this.inScaleMold()&&!this.isVertical(),c=this.uuid;if(a){b.push('<div id="',c,'" class="',d,'-tick">');this.uuid+="-real"}b.push("<div",this.domAttrs_(),">");if(a){this.uuid=c}b.push('<div id="',c,'-inner" class="',d,'-center">','<div id="',c,'-btn" class="',d,'-btn">',"</div></div></div>");if(a){b.push("</div>")}};
;zk._m['sphere']=[zk._p.p.Slider,'scale'];zk._m['default']=[zk._p.p.Slider,'scale'];zkmld(zk._p.p.Slider,zk._m);zul.inp.Spinner=zk.$extends(zul.inp.FormatWidget,{_value:0,_step:1,_buttonVisible:true,$define:{step:_zkf=function(){},buttonVisible:function(a){var d=this.$n("btn"),b=this.getZclass();if(!d){return}if(!this.inRoundedMold()){jq(d)[a?"show":"hide"]();jq(this.getInputNode())[a?"removeClass":"addClass"](b+"-right-edge")}else{var c=a?"removeClass":"addClass";jq(d)[c](b+"-btn-right-edge");if(zk.ie6_){jq(d)[c](b+(this._readonly?"-btn-right-edge-readonly":"-btn-right-edge"));if(jq(this.getInputNode()).hasClass(b+"-text-invalid")){jq(d)[c](b+"-btn-right-edge-invalid")}}}this.onSize();return},min:_zkf=function(a){this._min=parseInt(a,10)},max:_zkf},getZclass:function(){var a=this._zclass;return a!=null?a:"z-spinner"+(this.inRoundedMold()?"-rounded":"")},isButtonVisible:function(){return _buttonVisible},intValue:function(){return this.$supers("getValue",arguments)},setConstraint:function(a){if(a!=null){var b=new zul.inp.SimpleSpinnerConstraint(a);this._min=b._min;this._max=b._max;this.$supers("setConstraint",[b])}else{this.$supers("setConstraint",arguments)}},coerceFromString_:function(a){if(!a){return null}var b=zk.fmt.Number.unformat(this._format,a),c=parseInt(b.raw,10);if(b.raw!=""+c&&b.raw!="-"+c){return{error:zk.fmt.Text.format(msgzul.INTEGER_REQUIRED,a)}}if(b.divscale){c=Math.round(c/Math.pow(10,b.divscale))}return c},coerceToString_:function(b){var a=this._format;return a?zk.fmt.Number.format(a,b,this._rounding):b!=null?""+b:""},onSize:_zkf=function(){var a=this.getWidth();if(!a||a.indexOf("%")!=-1){this.getInputNode().style.width=""}this.syncWidth()},onShow:_zkf,onHide:zul.inp.Textbox.onHide,validate:zul.inp.Intbox.validate,doKeyPress_:function(a){if(!this._shallIgnore(a,zul.inp.InputWidget._allowKeys)){this.$supers("doKeyPress_",arguments)}},doKeyDown_:function(a){var b=this.inp;if(b.disabled||b.readOnly){return}switch(a.keyCode){case 38:this.checkValue();this._increase(true);a.stop();return;case 40:this.checkValue();this._increase(false);a.stop();return}this.$supers("doKeyDown_",arguments)},ondropbtnup:function(a){jq(this._currentbtn).removeClass(this.getZclass()+"-btn-clk");this.domUnlisten_(document.body,"mouseup","ondropbtnup");this._currentbtn=null},_btnDown:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}if(this.inp&&!this.inp.disabled&&!zk.dragging){if(this._currentbtn){this.ondropbtnup(a)}jq(b).addClass(this.getZclass()+"-btn-clk");this.domListen_(document.body,"mouseup","ondropbtnup");this._currentbtn=b}var c=this.inp,b=this.$n("btn");if(c.disabled){return}this.checkValue();ofs=zk(b).revisedOffset();if((a.pageY-ofs[1])<b.offsetHeight/2){this._increase(true);this._startAutoIncProc(true)}else{this._increase(false);this._startAutoIncProc(false)}},checkValue:function(){var c=this.inp,b=this._min,a=this._max;if(!c.value){if(b&&a){c.value=(b<=0&&0<=a)?0:b}else{if(b){c.value=b<=0?0:b}else{if(a){c.value=0<=a?0:a}else{c.value=0}}}}},_btnUp:function(b){if(this.inRoundedMold()&&!this._buttonVisible){return}var c=this.inp;if(c.disabled){return}this._onChanging();this._stopAutoIncProc();if(zk.ie){var a=c.value.length;zk(c).setSelectionRange(a,a)}c.focus()},_btnOut:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}if(this.inp&&!this.inp.disabled&&!zk.dragging){jq(this.$n("btn")).removeClass(this.getZclass()+"-btn-over")}var b=this.inp;if(b.disabled){return}this._stopAutoIncProc()},_btnOver:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}if(this.inp&&!this.inp.disabled&&!zk.dragging){jq(this.$n("btn")).addClass(this.getZclass()+"-btn-over")}},_increase:function(a){var b=this.inp,c=parseInt(b.value,10);if(a){result=c+this._step}else{result=c-this._step}if(result>Math.pow(2,31)-1){result=Math.pow(2,31)-1}else{if(result<-Math.pow(2,31)){result=-Math.pow(2,31)}}if(this._max!=null&&result>this._max){result=this._max}else{if(this._min!=null&&result<this._min){result=this._min}}b.value=result;this._onChanging()},_clearValue:function(){var a=this.inp;a.value=this._defValue="";return true},_startAutoIncProc:function(a){var b=this;if(this.timerId){clearInterval(this.timerId)}this.timerId=setInterval(function(){b._increase(a)},200)},_stopAutoIncProc:function(){if(this.timerId){clearTimeout(this.timerId)}this.timerId=null},syncWidth:function(){var e=this.$n();if(!zk(e).isRealVisible()||(!this._inplace&&!e.style.width)){return}if(this._buttonVisible&&this._inplace){if(!e.style.width){var c=jq(e),f=this.getInplaceCSS();c.removeClass(f);if(zk.opera){e.style.width=jq.px0(zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth())}else{e.style.width=jq.px0(zk(e).revisedWidth(e.offsetWidth))}c.addClass(f)}}var b=zk.opera?zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth():zk(e).revisedWidth(e.offsetWidth),a=this.$n("btn"),d=this.getInputNode();d.style.width=jq.px0(zk(d).revisedWidth(b-(a?a.offsetWidth:0)))},doFocus_:function(a){var b=this.$n();if(this._inplace){b.style.width=jq.px0(zk(b).revisedWidth(b.offsetWidth))}this.$supers("doFocus_",arguments);if(this._inplace){if(jq(b).hasClass(this.getInplaceCSS())){jq(b).removeClass(this.getInplaceCSS());this.onSize()}}},doBlur_:function(a){var b=this.$n();if(this._inplace&&this._inplaceout){b.style.width=jq.px0(zk(b).revisedWidth(b.offsetWidth))}this.$supers("doBlur_",arguments);if(this._inplace&&this._inplaceout){jq(b).addClass(this.getInplaceCSS());this.onSize();b.style.width=this.getWidth()||""}},afterKeyDown_:function(a){if(this._inplace){jq(this.$n()).toggleClass(this.getInplaceCSS(),a.keyCode==13?null:false)}this.$supers("afterKeyDown_",arguments)},bind_:function(){this.$supers(zul.inp.Spinner,"bind_",arguments);this.timeId=null;var b=this.inp=this.$n("real"),a=this.$n("btn");zWatch.listen({onSize:this,onShow:this});if(this._inplace){jq(b).addClass(this.getInplaceCSS())}if(this._readonly&&!this.inRoundedMold()){jq(b).addClass(this.getZclass()+"-right-edge")}if(a){this._auxb=new zul.Auxbutton(this,a,b);this.domListen_(a,"onmousedown","_btnDown");this.domListen_(a,"onmouseup","_btnUp");this.domListen_(a,"onmouseout","_btnOut");this.domListen_(a,"mouseover","_btnOver")}this.syncWidth()},unbind_:function(){if(this.timerId){clearTimeout(this.timerId);this.timerId=null}zWatch.unlisten({onSize:this,onShow:this});var a=this.$n("btn");if(a){this._auxb.cleanup();this._auxb=null;this.domUnlisten_(a,"onmousedown","_btnDown");this.domUnlisten_(a,"onmouseup","_btnUp");this.domUnlisten_(a,"onmouseout","_btnOut");this.domUnlisten_(a,"mouseover","_btnOver")}this.$supers(zul.inp.Spinner,"unbind_",arguments)}});
zkreg('zul.inp.Spinner');zk._m={};
zk._m['rounded']=function(a){var c=this.getZclass(),b=this.uuid;a.push("<i",this.domAttrs_({text:true}),">",'<input id="',b,'-real"','class="',c,'-inp"',this.textAttrs_(),"/>",'<i id="',b,'-btn"','class="',c,"-btn ");if(this.inRoundedMold()){if(!this._buttonVisible){a.push(" ",c,"-btn-right-edge")}if(this._readonly){a.push(" ",c,"-btn-readonly")}if(zk.ie6_&&!this._buttonVisible&&this._readonly){a.push(" ",c,"-btn-right-edge-readonly")}}else{if(!this._buttonVisible){a.push('" style="display:none"')}}a.push('"></i></i>')};
;zk._m['default']=[zk._p.p.Spinner,'rounded'];zkmld(zk._p.p.Spinner,zk._m);zul.inp.Timebox=zk.$extends(zul.inp.FormatWidget,{LEGAL_CHARS:"ahKHksm",MINUTE_FIELD:1,SECOND_FIELD:2,AM_PM_FIELD:3,HOUR0_FIELD:4,HOUR1_FIELD:5,HOUR2_FIELD:6,HOUR3_FIELD:7,_buttonVisible:true,_format:"HH:mm",$define:{buttonVisible:function(a){var d=this.$n("btn"),b=this.getZclass();if(d){if(!this.inRoundedMold()){jq(d)[a?"show":"hide"]();jq(this.getInputNode())[a?"removeClass":"addClass"](b+"-right-edge")}else{var c=a?"removeClass":"addClass";jq(d)[c](b+"-btn-right-edge");if(zk.ie6_){jq(d)[c](b+(this._readonly?"-btn-right-edge-readonly":"-btn-right-edge"));if(jq(this.getInputNode()).hasClass(b+"-text-invalid")){jq(d)[c](b+"-btn-right-edge-invalid")}}}this.onSize()}},format:function(a,b){this._parseFormat(a);var c=this.getInputNode();if(c){c.value=this.coerceToString_(this._value);if(b){this._defValue=c.value}}}},setValue:function(c){var b;if(c){b=[];for(var a=arguments.length;--a>0;){b.unshift(arguments[a])}b.unshift((typeof c=="string")?this.coerceFromString_(c):c)}else{b=arguments}this.$supers("setValue",b)},getRawText:function(){return this.coerceToString_(this._value)},_checkFormat:function(a){var e,d=[];for(var f=0,b=a.length;f<b;f++){var g=a.charAt(f);switch(g){case"K":case"h":case"H":case"k":case"m":case"s":if(a.charAt(f+1)==g){f++}else{e=true}d.push(g+g);break;default:d.push(g)}}if(e){return zk.fmt.Text.format(msgzul.DATE_REQUIRED+d.join(""))}},_parseFormat:function(e){var k=[];for(var h=0,g=e.length;h<g;h++){var m=e.charAt(h);switch(m){case"a":var l=zk.APM[0].length;k.push(new zul.inp.AMPMHandler([h,h+l-1],this.AM_PM_FIELD));break;case"K":var a=h,f=e.charAt(h+1)=="K"?++h:h;k.push(new zul.inp.HourHandler2([a,f],this.HOUR3_FIELD));break;case"h":var a=h,f=e.charAt(h+1)=="h"?++h:h;k.push(new zul.inp.HourHandler([a,f],this.HOUR2_FIELD));break;case"H":var a=h,f=e.charAt(h+1)=="H"?++h:h;k.push(new zul.inp.HourInDayHandler([a,f],this.HOUR0_FIELD));break;case"k":var a=h,f=e.charAt(h+1)=="k"?++h:h;k.push(new zul.inp.HourInDayHandler2([a,f],this.HOUR1_FIELD));break;case"m":var a=h,f=e.charAt(h+1)=="m"?++h:h;k.push(new zul.inp.MinuteHandler([a,f],this.MINUTE_FIELD));break;case"s":var a=h,f=e.charAt(h+1)=="s"?++h:h;k.push(new zul.inp.SecondHandler([a,f],this.SECOND_FIELD));break;default:var d=[],a=h,f=h;while((d.push(m))&&++f<g){m=e.charAt(f);if(this.LEGAL_CHARS.indexOf(m)!=-1){f--;break}}k.push({index:[a,f],format:(function(c){return function(){return c}})(d.join(""))});h=f}}for(var b,h=0,g=k.length;h<g;h++){if(k[h].type==this.AM_PM_FIELD){b=k[h].index[1]-k[h].index[0];if(!b){break}}else{if(b){k[h].index[0]+=b;k[h].index[1]+=b}}}this._fmthdler=k},coerceToString_:function(c){if(!this._fmthdler||(!this._changed&&!c&&arguments.length)){return""}var b=[];for(var d=0,a=this._fmthdler.length;d<a;d++){b.push(this._fmthdler[d].format(c))}return b.join("")},coerceFromString_:function(a){if(!a){return null}var g;if((g=this._checkFormat(this._format))){return{error:g}}if(!this._fmthdler){this._parseFormat(this._format)}var c=zUtl.today(true),h,f,k,b=[];for(var e=0,d=this._fmthdler.length;e<d;e++){if(this._fmthdler[e].type==this.AM_PM_FIELD){h=true;f=this._fmthdler[e].unformat(c,a)}else{if(this._fmthdler[e].type){b.push(this._fmthdler[e])}}}if(h){for(var e=0,d=b.length;e<d;e++){if(b[e].type==this.HOUR2_FIELD||b[e].type==this.HOUR3_FIELD){k=true;break}}}if(k){for(var e=0,d=b.length;e<d;e++){if(b[e]!=this.HOUR0_FIELD&&b[e]!=this.HOUR1_FIELD){c=b[e].unformat(c,a,f)}}}else{for(var e=0,d=b.length;e<d;e++){if(b[e]!=this.HOUR2_FIELD&&b[e].type!=this.HOUR3_FIELD){c=b[e].unformat(c,a)}}}return c},getZclass:function(){var a=this._zclass;return a!=null?a:"z-timebox"+(this.inRoundedMold()?"-rounded":"")},onSize:_zkf=function(){var a=this.getWidth(),b=this.getInputNode();if(!a||a.indexOf("%")!=-1){b.style.width=""}if(b&&this._value&&!b.value){if(!this._fmthdler){this._parseFormat(this._format)}b.value=this.coerceToString_(this._value)}this.syncWidth()},onShow:_zkf,onHide:zul.inp.Textbox.onHide,validate:zul.inp.Intbox.validate,doClick_:function(a){if(a.domTarget==this.getInputNode()){this._doCheckPos(this._getPos())}this.$supers("doClick_",arguments)},doKeyPress_:function(a){if(zk.opera&&a.keyCode!=9){a.stop();return}this.$supers("doKeyPress_",arguments)},doKeyDown_:function(a){var c=this.getInputNode();if(c.disabled||c.readOnly){return}this.lastPos=this._getPos();var b=a.keyCode;switch(b){case 48:case 96:case 49:case 97:case 50:case 98:case 51:case 99:case 52:case 100:case 53:case 101:case 54:case 102:case 55:case 103:case 56:case 104:case 57:case 105:b=b-(b>=96?96:48);this._doType(b);a.stop();return;case 37:this._doLeft();a.stop();return;case 38:this._doUp();a.stop();return;case 39:this._doRight();a.stop();return;case 40:this._doDown();a.stop();return;case 46:this._doDel();a.stop();return;case 8:this._doBack();a.stop();return;case 9:break;case 35:case 36:this._doCheckPos(b==36?0:c.value.length);a.stop();return;case 13:case 27:break;default:if(!(b>=112&&b<=123)&&!a.ctrlKey&&!a.altKey){a.stop()}}this.$supers("doKeyDown_",arguments)},_dodropbtnup:function(a){jq(this._currentbtn).removeClass(this.getZclass()+"-btn-clk");this.domUnlisten_(document.body,"onMouseup","_dodropbtnup");this._currentbtn=null},_btnDown:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}var c=this.getInputNode(),b=this.$n("btn");if(!c||c.disabled){return}if(this._currentbtn){this._dodropbtnup(a)}jq(b).addClass(this.getZclass()+"-btn-clk");this.domListen_(document.body,"onMouseup","_dodropbtnup");this._currentbtn=b;if(!this._fmthdler){this._parseFormat(this._format)}if(!c.value){c.value=this.coerceToString_()}var d=zk(b).revisedOffset();if((a.pageY-d[1])<b.offsetHeight/2){this._doUp();this._startAutoIncProc(true)}else{this._doDown();this._startAutoIncProc(false)}this._lastPos=this._getPos();this._changed=true},_btnUp:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}var b=this.getInputNode();if(b.disabled||zk.dragging){return}this._onChanging();this._stopAutoIncProc();if((zk.ie||zk.safari)&&this._lastPos){zk(b).setSelectionRange(this._lastPos,this._lastPos)}b.focus()},_btnOut:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}var b=this.getInputNode();if(!b||b.disabled||zk.dragging){return}jq(this.$n("btn")).removeClass(this.getZclass()+"-btn-over");this._stopAutoIncProc()},_btnOver:function(a){if(this.inRoundedMold()&&!this._buttonVisible){return}if(this.getInputNode()&&!this.getInputNode().disabled&&!zk.dragging){jq(this.$n("btn")).addClass(this.getZclass()+"-btn-over")}},_getPos:function(){return zk(this.getInputNode()).getSelectionRange()[1]},_doCheckPos:function(f){var e=this.getInputNode();if(!this._fmthdler){this._parseFormat(this._format)}for(var d=0,c=this._fmthdler.length;d<c;d++){var a=this._fmthdler[d];if(a.index[1]+1==f){if(a.type){break}var b=d;while(this._fmthdler[++b]){if(this._fmthdler[b].type==this.AM_PM_FIELD){f=this._fmthdler[b].index[1]+1;break}else{if(this._fmthdler[b].type){f=this._fmthdler[b].index[0]+1;break}}}break}else{if(a.index[0]<=f&&a.index[1]+1>=f){if(!a.type){var b=d;if(this._fmthdler[b+1]){while(this._fmthdler[++b]){if(this._fmthdler[b].type){f=this._fmthdler[b].index[0]+1;break}}}else{while(this._fmthdler[--b]){if(this._fmthdler[b].type){f=this._fmthdler[b].index[1]+1;break}}}}else{if(a.type==this.AM_PM_FIELD){f=a.index[1]+1;break}else{if(a.index[0]==f){f++}break}}}}}zk(e).setSelectionRange(f,f);this.lastPos=f},_doLeft:function(){var f=this.getInputNode(),g=this.lastPos-1,b=this.getTimeHandler();for(var e=0,d=this._fmthdler.length;e<d;e++){var h=this._fmthdler[e];if(h.index[0]==g){var c=e;g++;while(this._fmthdler[--c]){if(this._fmthdler[c].type){g=this._fmthdler[c].index[1]+1;break}}break}else{if(h.index[0]<g&&h.index[1]>=g){if(!h.type||h.type==this.AM_PM_FIELD){var c=e;g++;while(this._fmthdler[--c]){if(this._fmthdler[c].type){g=this._fmthdler[c].index[1]+1;break}}}else{break}}}}if(b.type&&b.type!=this.AM_PM_FIELD){if(g<=b.index[0]||g>b.index[1]+1){var a=f.value,k=a.substring(b.index[0],b.index[1]+1);k=k.replace(/ /g,"0");f.value=a.substring(0,b.index[0])+k+a.substring(b.index[1]+1,a.length)}}zk(f).setSelectionRange(g,g);this.lastPos=g},_doRight:function(){var f=this.getInputNode(),g=this.lastPos+1,b=this.getTimeHandler();for(var e=0,d=this._fmthdler.length;e<d;e++){var h=this._fmthdler[e];if(h.index[1]+2==g){var c=e;g--;while(this._fmthdler[++c]){if(this._fmthdler[c].type==this.AM_PM_FIELD){g=this._fmthdler[c].index[1]+1;break}else{if(this._fmthdler[c].type){g=this._fmthdler[c].index[0]+1;break}}}break}else{if(h.index[0]<g&&h.index[1]+1>=g){if(!h.type||h.type==this.AM_PM_FIELD){var c=e;g--;while(this._fmthdler[++c]){if(this._fmthdler[c].type){g=this._fmthdler[c].index[0]+1;break}}}else{break}}}}if(b.type&&b.type!=this.AM_PM_FIELD){if(g<=b.index[0]||g>b.index[1]+1){var a=f.value,k=a.substring(b.index[0],b.index[1]+1);k=k.replace(/ /g,"0");f.value=a.substring(0,b.index[0])+k+a.substring(b.index[1]+1,a.length)}}zk(f).setSelectionRange(g,g);this.lastPos=g},_doUp:function(){this._changed=true;this.getTimeHandler().increase(this,1);this._onChanging()},_doDown:function(){this._changed=true;this.getTimeHandler().increase(this,-1);this._onChanging()},_doBack:function(){this._changed=true;this.getTimeHandler().deleteTime(this,true)},_doDel:function(){this._changed=true;this.getTimeHandler().deleteTime(this,false)},_doType:function(a){this._changed=true;this.getTimeHandler().addTime(this,a)},getTimeHandler:function(){var d=zk(this.getInputNode()).getSelectionRange();d=d[1]-d[0]>2?d[0]:d[1];for(var b=0,c=this._fmthdler,a=c.length;b<a;b++){if(!c[b].type){continue}if(c[b].index[0]<d&&c[b].index[1]+1>=d){return c[b]}}return this._fmthdler[0]},getNextTimeHandler:function(d){var g=d.index[1]+1,a;for(var c=0,e=this._fmthdler,b=e.length;c<b;c++){if(!e[c].type||e[c].$instanceof(zul.inp.AMPMHandler)){continue}a=e[c];if(e[c]==d){continue}if(e[c].index[1]+1>=g){return e[c]}}return a},_startAutoIncProc:function(a){if(this.timerId){clearInterval(this.timerId)}var b=this,c=a?"_doUp":"_doDown";this.timerId=setInterval(function(){if((zk.ie||zk.safari)&&b._lastPos){zk(b.getInputNode()).setSelectionRange(b._lastPos,b._lastPos)}b[c]()},300)},_stopAutoIncProc:function(){if(this.timerId){clearTimeout(this.timerId)}this.currentStep=this.defaultStep;this.timerId=null},syncWidth:function(){var e=this.$n();if(!zk(e).isRealVisible()||(!this._inplace&&!e.style.width)){return}if(this._buttonVisible&&this._inplace){if(!e.style.width){var c=jq(e),f=this.getInplaceCSS();c.removeClass(f);if(zk.opera){e.style.width=jq.px0(zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth())}else{e.style.width=jq.px0(zk(e).revisedWidth(e.offsetWidth))}c.addClass(f)}}var b=zk.opera?zk(e).revisedWidth(e.clientWidth)+zk(e).borderWidth():zk(e).revisedWidth(e.offsetWidth),a=this.$n("btn"),d=this.getInputNode();d.style.width=jq.px0(zk(d).revisedWidth(b-(a?a.offsetWidth:0)))},doFocus_:function(a){var d=this.$n(),c=this.getInputNode(),b=zk(c).getSelectionRange();if(this._inplace){d.style.width=jq.px0(zk(d).revisedWidth(d.offsetWidth))}this.$supers("doFocus_",arguments);if(!this._fmthdler){this._parseFormat(this._format)}if(!c.value){c.value=this.coerceToString_()}this._doCheckPos(this._getPos());if(b[0]!==b[1]){zk(c).setSelectionRange(b[0],b[1]);this.lastPos=b[1]}if(this._inplace){if(jq(d).hasClass(this.getInplaceCSS())){jq(d).removeClass(this.getInplaceCSS());this.onSize()}}},doBlur_:function(a){var b=this.$n();if(this._inplace&&this._inplaceout){b.style.width=jq.px0(zk(b).revisedWidth(b.offsetWidth))}if(!this.getValue()&&!this._changed){this.getInputNode().value=this._lastRawValVld=""}this.$supers("doBlur_",arguments);if(this._inplace&&this._inplaceout){jq(b).addClass(this.getInplaceCSS());this.onSize();b.style.width=this.getWidth()||""}},afterKeyDown_:function(a){if(this._inplace){jq(this.$n()).toggleClass(this.getInplaceCSS(),a.keyCode==13?null:false)}this.$supers("afterKeyDown_",arguments)},bind_:function(){this.$supers(zul.inp.Timebox,"bind_",arguments);var b=this.getInputNode(),a=this.$n("btn");zWatch.listen({onSize:this,onShow:this});if(this._inplace){jq(b).addClass(this.getInplaceCSS())}if(this._readonly&&!this.inRoundedMold()){jq(b).addClass(this.getZclass()+"-right-edge")}if(a){this._auxb=new zul.Auxbutton(this,a,b);this.domListen_(a,"onmousedown","_btnDown");this.domListen_(a,"onmouseup","_btnUp");this.domListen_(a,"onmouseout","_btnOut");this.domListen_(a,"mouseover","_btnOver")}this.syncWidth()},unbind_:function(){if(this.timerId){clearTimeout(this.timerId);this.timerId=null}zWatch.unlisten({onSize:this,onShow:this});var a=this.$n("btn");if(a){this._auxb.cleanup();this._auxb=null;this.domUnlisten_(a,"onmousedown","_btnDown");this.domUnlisten_(a,"onmouseup","_btnUp");this.domUnlisten_(a,"onmouseout","_btnOut");this.domUnlisten_(a,"mouseover","_btnOver")}this._changed=false;this.$supers(zul.inp.Timebox,"unbind_",arguments)}});zul.inp.TimeHandler=zk.$extends(zk.Object,{maxsize:59,minsize:0,digits:2,$init:function(a,b){this.index=a;this.type=b},format:function(a){return"00"},unformat:function(a,b){return a},increase:function(g,b){var d=g.getInputNode(),h=this.index[0],c=this.index[1]+1,f=d.value,e=f.substring(h,c);e=zk.parseInt(e.replace(/ /g,"0"));e+=b;var a=this.maxsize+1;if(e<this.minsize){e=this.maxsize}else{if(e>=a){e=this.minsize}}if(e<10){e="0"+e}d.value=f.substring(0,h)+e+f.substring(c,f.length);zk(d).setSelectionRange(h,c)},deleteTime:function(f,b){var c=f.getInputNode(),d=zk(c).getSelectionRange(),h=d[1],g=this.index[0],a=this.index[1]+1,e=c.value;if(d[0]!=d[1]){c.value=e.substring(0,g)+"  "+e.substring(a,e.length);h=a}else{if(h==g+1){if(b){c.value=e.substring(0,g)+" "+e.substring(g+1,e.length)}else{c.value=e.substring(0,g+1)+" "+e.substring(g+2,e.length);h++}}else{if(b){c.value=e.substring(0,g)+" "+e.substring(g,g+1)+e.substring(a,e.length)}}}zk(c).setSelectionRange(h,h)},_addNextTime:function(c,b){var a=c.getNextTimeHandler(this);if(a==this){return}zk(c.getInputNode()).setSelectionRange(a.index[0],a.index[1]+1);a.addTime(c,b)},addTime:function(j,g){var h=j.getInputNode(),d=zk(h).getSelectionRange(),b=this.index[0],f=this.index[1]+1,e=h.value,i=e.substring(b,f);if(d[1]-d[0]>2){d[1]=d[0]+2}var a=e.substring(d[0],d[1]);if(a){if(d[1]-d[0]>1){a=" "+g}h.value=e.substring(0,d[0])+a+e.substring(d[1],e.length)}else{var c="";if(d[1]==f){if(i.startsWith(" ")){if(i.endsWith(" ")){c=" "+g}else{c=i.charAt(1)+g}}else{if(i.endsWith(" ")){c=i.charAt(0)+g}else{this._addNextTime(j,g);return}}}else{if(i.startsWith(" ")){c=g+i.charAt(1)}}if(c&&c!=i){if(zk.parseInt(c)<=this.maxsize){h.value=e.substring(0,b)+c+e.substring(f,e.length)}else{h.value=e.substring(0,b)+"0"+i.charAt(1)+e.substring(f,e.length);this._addNextTime(j,g);return}}}zk(h).setSelectionRange(d[1],d[1])},getText:function(b){var c=this.index[0],a=this.index[1]+1;return b.substring(c,a)}});zul.inp.HourInDayHandler=zk.$extends(zul.inp.TimeHandler,{maxsize:23,minsize:0,format:function(a){if(!a){return"00"}else{var b=a.getHours();if(b<10){b="0"+b}return b.toString()}},unformat:function(a,b){a.setHours(zk.parseInt(this.getText(b)));return a}});zul.inp.HourInDayHandler2=zk.$extends(zul.inp.TimeHandler,{maxsize:24,minsize:1,format:function(a){if(!a){return"24"}else{var b=a.getHours();if(b==0){b="24"}else{if(b<10){b="0"+b}}return b.toString()}},unformat:function(b,c){var a=zk.parseInt(this.getText(c));if(a==24){a=0}b.setHours(a);return b}});zul.inp.HourHandler=zk.$extends(zul.inp.TimeHandler,{maxsize:12,minsize:1,format:function(a){if(!a){return"12"}else{var b=a.getHours();b=(b%12);if(b==0){b="12"}else{if(b<10){b="0"+b}}return b.toString()}},unformat:function(b,d,c){var a=zk.parseInt(this.getText(d));if(a==12){a=0}b.setHours(c?a:a+12);return b}});zul.inp.HourHandler2=zk.$extends(zul.inp.TimeHandler,{maxsize:11,minsize:0,format:function(a){if(!a){return"00"}else{var b=a.getHours();b=(b%12);if(b<10){b="0"+b}return b.toString()}},unformat:function(b,d,c){var a=zk.parseInt(this.getText(d));b.setHours(c?a:a+12);return b}});zul.inp.MinuteHandler=zk.$extends(zul.inp.TimeHandler,{format:function(b){if(!b){return"00"}else{var a=b.getMinutes();if(a<10){a="0"+a}return a.toString()}},unformat:function(a,b){a.setMinutes(zk.parseInt(this.getText(b)));return a}});zul.inp.SecondHandler=zk.$extends(zul.inp.TimeHandler,{format:function(a){if(!a){return"00"}else{var b=a.getSeconds();if(b<10){b="0"+b}return b.toString()}},unformat:function(a,b){a.setSeconds(zk.parseInt(this.getText(b)));return a}});zul.inp.AMPMHandler=zk.$extends(zul.inp.TimeHandler,{format:function(a){if(!a){return zk.APM[0]}var b=a.getHours();return zk.APM[b<12?0:1]},unformat:function(a,b){return zk.APM[0]==this.getText(b)},deleteTime:zk.$void,addTime:zul.inp.TimeHandler.prototype._addNextTime,increase:function(f,a){var c=f.getInputNode(),g=this.index[0],b=this.index[1]+1,e=c.value,d=e.substring(g,b);d=zk.APM[0]==d?zk.APM[1]:zk.APM[0];c.value=e.substring(0,g)+d+e.substring(b,e.length);zk(c).setSelectionRange(g,b)}});
zkreg('zul.inp.Timebox');zk._m={};
zk._m['rounded']=[zk._p.p.Spinner,'rounded'];zk._m['default']=[zk._p.p.Spinner,'rounded'];zkmld(zk._p.p.Timebox,zk._m);
}finally{zk.setLoaded(zk._p.n);}});zk.setLoaded('zul.inp',1);